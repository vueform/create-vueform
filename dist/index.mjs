import lr from"readline";import cr from"events";import I from"path";import De,{promises as ur}from"fs";import hr from"constants";import dr from"stream";import fr,{promisify as mr}from"util";import pr from"assert";import{exec as yr,execSync as wr,spawn as gr}from"child_process";import{fileURLToPath as vr}from"url";var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Te={};const{FORCE_COLOR:br,NODE_DISABLE_COLORS:Sr,TERM:$r}=process.env,P={enabled:!Sr&&$r!=="dumb"&&br!=="0",reset:O(0,0),bold:O(1,22),dim:O(2,22),italic:O(3,23),underline:O(4,24),inverse:O(7,27),hidden:O(8,28),strikethrough:O(9,29),black:O(30,39),red:O(31,39),green:O(32,39),yellow:O(33,39),blue:O(34,39),magenta:O(35,39),cyan:O(36,39),white:O(37,39),gray:O(90,39),grey:O(90,39),bgBlack:O(40,49),bgRed:O(41,49),bgGreen:O(42,49),bgYellow:O(43,49),bgBlue:O(44,49),bgMagenta:O(45,49),bgCyan:O(46,49),bgWhite:O(47,49)};function Ce(e,t){let i=0,r,s="",n="";for(;i<e.length;i++)r=e[i],s+=r.open,n+=r.close,t.includes(r.close)&&(t=t.replace(r.rgx,r.close+r.open));return s+t+n}function Er(e,t){let i={has:e,keys:t};return i.reset=P.reset.bind(i),i.bold=P.bold.bind(i),i.dim=P.dim.bind(i),i.italic=P.italic.bind(i),i.underline=P.underline.bind(i),i.inverse=P.inverse.bind(i),i.hidden=P.hidden.bind(i),i.strikethrough=P.strikethrough.bind(i),i.black=P.black.bind(i),i.red=P.red.bind(i),i.green=P.green.bind(i),i.yellow=P.yellow.bind(i),i.blue=P.blue.bind(i),i.magenta=P.magenta.bind(i),i.cyan=P.cyan.bind(i),i.white=P.white.bind(i),i.gray=P.gray.bind(i),i.grey=P.grey.bind(i),i.bgBlack=P.bgBlack.bind(i),i.bgRed=P.bgRed.bind(i),i.bgGreen=P.bgGreen.bind(i),i.bgYellow=P.bgYellow.bind(i),i.bgBlue=P.bgBlue.bind(i),i.bgMagenta=P.bgMagenta.bind(i),i.bgCyan=P.bgCyan.bind(i),i.bgWhite=P.bgWhite.bind(i),i}function O(e,t){let i={open:`\x1B[${e}m`,close:`\x1B[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(r){return this!==void 0&&this.has!==void 0?(this.has.includes(e)||(this.has.push(e),this.keys.push(i)),r===void 0?this:P.enabled?Ce(this.keys,r+""):r+""):r===void 0?Er([e],[i]):P.enabled?Ce([i],r+""):r+""}}var K=P,Pr=(e,t)=>{if(!(e.meta&&e.name!=="escape")){if(e.ctrl){if(e.name==="a")return"first";if(e.name==="c"||e.name==="d")return"abort";if(e.name==="e")return"last";if(e.name==="g")return"reset"}if(t){if(e.name==="j")return"down";if(e.name==="k")return"up"}return e.name==="return"||e.name==="enter"?"submit":e.name==="backspace"?"delete":e.name==="delete"?"deleteForward":e.name==="abort"?"abort":e.name==="escape"?"exit":e.name==="tab"?"next":e.name==="pagedown"?"nextPage":e.name==="pageup"?"prevPage":e.name==="home"?"home":e.name==="end"?"end":e.name==="up"?"up":e.name==="down"?"down":e.name==="right"?"right":e.name==="left"?"left":!1}},Xt=e=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),i=new RegExp(t,"g");return typeof e=="string"?e.replace(i,""):e};const te="\x1B",T=`${te}[`,xr="\x07",ee={to(e,t){return t?`${T}${t+1};${e+1}H`:`${T}${e+1}G`},move(e,t){let i="";return e<0?i+=`${T}${-e}D`:e>0&&(i+=`${T}${e}C`),t<0?i+=`${T}${-t}A`:t>0&&(i+=`${T}${t}B`),i},up:(e=1)=>`${T}${e}A`,down:(e=1)=>`${T}${e}B`,forward:(e=1)=>`${T}${e}C`,backward:(e=1)=>`${T}${e}D`,nextLine:(e=1)=>`${T}E`.repeat(e),prevLine:(e=1)=>`${T}F`.repeat(e),left:`${T}G`,hide:`${T}?25l`,show:`${T}?25h`,save:`${te}7`,restore:`${te}8`},Or={up:(e=1)=>`${T}S`.repeat(e),down:(e=1)=>`${T}T`.repeat(e)},Fr={screen:`${T}2J`,up:(e=1)=>`${T}1J`.repeat(e),down:(e=1)=>`${T}J`.repeat(e),line:`${T}2K`,lineEnd:`${T}K`,lineStart:`${T}1K`,lines(e){let t="";for(let i=0;i<e;i++)t+=this.line+(i<e-1?ee.up():"");return e&&(t+=ee.left),t}};var G={cursor:ee,scroll:Or,erase:Fr,beep:xr};const Dr=Xt,{erase:ke,cursor:Tr}=G,Cr=e=>[...Dr(e)].length;var kr=function(e,t){if(!t)return ke.line+Tr.to(0);let i=0;const r=e.split(/\r?\n/);for(let s of r)i+=1+Math.floor(Math.max(Cr(s)-1,0)/t);return ke.lines(i)};const Ot={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},Mr={arrowUp:Ot.arrowUp,arrowDown:Ot.arrowDown,arrowLeft:Ot.arrowLeft,arrowRight:Ot.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},_r=process.platform==="win32"?Mr:Ot;var Me=_r;const yt=K,dt=Me,ie=Object.freeze({password:{scale:1,render:e=>"*".repeat(e.length)},emoji:{scale:2,render:e=>"\u{1F603}".repeat(e.length)},invisible:{scale:0,render:e=>""},default:{scale:1,render:e=>`${e}`}}),Ir=e=>ie[e]||ie.default,Ft=Object.freeze({aborted:yt.red(dt.cross),done:yt.green(dt.tick),exited:yt.yellow(dt.cross),default:yt.cyan("?")}),jr=(e,t,i)=>t?Ft.aborted:i?Ft.exited:e?Ft.done:Ft.default,Ar=e=>yt.gray(e?dt.ellipsis:dt.pointerSmall),Nr=(e,t)=>yt.gray(e?t?dt.pointerSmall:"+":dt.line);var Rr={styles:ie,render:Ir,symbols:Ft,symbol:jr,delimiter:Ar,item:Nr};const Lr=Xt;var Yr=function(e,t){let i=String(Lr(e)||"").split(/\r?\n/);return t?i.map(r=>Math.ceil(r.length/t)).reduce((r,s)=>r+s):i.length},Wr=(e,t={})=>{const i=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",r=t.width;return(e||"").split(/\r?\n/g).map(s=>s.split(/\s+/g).reduce((n,o)=>(o.length+i.length>=r||n[n.length-1].length+o.length+1<r?n[n.length-1]+=` ${o}`:n.push(`${i}${o}`),n),[i]).join(`
`)).join(`
`)},Br=(e,t,i)=>{i=i||t;let r=Math.min(t-i,e-Math.floor(i/2));r<0&&(r=0);let s=Math.min(r+i,t);return{startIndex:r,endIndex:s}},z={action:Pr,clear:kr,style:Rr,strip:Xt,figures:Me,lines:Yr,wrap:Wr,entriesToDisplay:Br};const _e=lr,{action:Jr}=z,Vr=cr,{beep:Hr,cursor:Ur}=G,Kr=K;let Gr=class extends Vr{constructor(t={}){super(),this.firstRender=!0,this.in=t.stdin||process.stdin,this.out=t.stdout||process.stdout,this.onRender=(t.onRender||(()=>{})).bind(this);const i=_e.createInterface({input:this.in,escapeCodeTimeout:50});_e.emitKeypressEvents(this.in,i),this.in.isTTY&&this.in.setRawMode(!0);const r=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,s=(n,o)=>{let l=Jr(o,r);l===!1?this._&&this._(n,o):typeof this[l]=="function"?this[l](o):this.bell()};this.close=()=>{this.out.write(Ur.show),this.in.removeListener("keypress",s),this.in.isTTY&&this.in.setRawMode(!1),i.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",s)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(Hr)}render(){this.onRender(Kr),this.firstRender&&(this.firstRender=!1)}};var ot=Gr;const Nt=K,qr=ot,{erase:zr,cursor:Dt}=G,{style:re,clear:se,lines:Zr,figures:Qr}=z;class Xr extends qr{constructor(t={}){super(t),this.transform=re.render(t.style),this.scale=this.transform.scale,this.msg=t.message,this.initial=t.initial||"",this.validator=t.validate||(()=>!0),this.value="",this.errorMsg=t.error||"Please Enter A Valid Value",this.cursor=+!!this.initial,this.cursorOffset=0,this.clear=se("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=Nt.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=+!!this.initial,this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(t){this.placeholder||(this.cursor=this.cursor+t,this.cursorOffset+=t)}_(t,i){let r=this.value.slice(0,this.cursor),s=this.value.slice(this.cursor);this.value=`${r}${t}${s}`,this.red=!1,this.cursor=this.placeholder?0:r.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let t=this.value.slice(0,this.cursor-1),i=this.value.slice(this.cursor);this.value=`${t}${i}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let t=this.value.slice(0,this.cursor),i=this.value.slice(this.cursor+1);this.value=`${t}${i}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(Dt.down(Zr(this.outputError,this.out.columns)-1)+se(this.outputError,this.out.columns)),this.out.write(se(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[re.symbol(this.done,this.aborted),Nt.bold(this.msg),re.delimiter(this.done),this.red?Nt.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,i,r)=>t+`
${r?" ":Qr.pointerSmall} ${Nt.red().italic(i)}`,"")),this.out.write(zr.line+Dt.to(0)+this.outputText+Dt.save+this.outputError+Dt.restore+Dt.move(this.cursorOffset,0)))}}var ts=Xr;const et=K,es=ot,{style:Ie,clear:je,figures:Rt,wrap:is,entriesToDisplay:rs}=z,{cursor:ss}=G;class ns extends es{constructor(t={}){super(t),this.msg=t.message,this.hint=t.hint||"- Use arrow-keys. Return to submit.",this.warn=t.warn||"- This option is disabled",this.cursor=t.initial||0,this.choices=t.choices.map((i,r)=>(typeof i=="string"&&(i={title:i,value:r}),{title:i&&(i.title||i.value||i),value:i&&(i.value===void 0?r:i.value),description:i&&i.description,selected:i&&i.selected,disabled:i&&i.disabled})),this.optionsPerPage=t.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=je("",this.out.columns),this.render()}moveCursor(t){this.cursor=t,this.value=this.choices[t].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(t,i){if(t===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(ss.hide):this.out.write(je(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:i}=rs(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[Ie.symbol(this.done,this.aborted),et.bold(this.msg),Ie.delimiter(!1),this.done?this.selection.title:this.selection.disabled?et.yellow(this.warn):et.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let r=t;r<i;r++){let s,n,o="",l=this.choices[r];r===t&&t>0?n=Rt.arrowUp:r===i-1&&i<this.choices.length?n=Rt.arrowDown:n=" ",l.disabled?(s=this.cursor===r?et.gray().underline(l.title):et.strikethrough().gray(l.title),n=(this.cursor===r?et.bold().gray(Rt.pointer)+" ":"  ")+n):(s=this.cursor===r?et.cyan().underline(l.title):l.title,n=(this.cursor===r?et.cyan(Rt.pointer)+" ":"  ")+n,l.description&&this.cursor===r&&(o=` - ${l.description}`,(n.length+s.length+o.length>=this.out.columns||l.description.split(/\r?\n/).length>1)&&(o=`
`+is(l.description,{margin:3,width:this.out.columns})))),this.outputText+=`${n} ${s}${et.gray(o)}
`}}this.out.write(this.outputText)}}var os=ns;const Lt=K,as=ot,{style:Ae,clear:ls}=z,{cursor:Ne,erase:cs}=G;class us extends as{constructor(t={}){super(t),this.msg=t.message,this.value=!!t.initial,this.active=t.active||"on",this.inactive=t.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(t,i){if(t===" ")this.value=!this.value;else if(t==="1")this.value=!0;else if(t==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(Ne.hide):this.out.write(ls(this.outputText,this.out.columns)),super.render(),this.outputText=[Ae.symbol(this.done,this.aborted),Lt.bold(this.msg),Ae.delimiter(this.done),this.value?this.inactive:Lt.cyan().underline(this.inactive),Lt.gray("/"),this.value?Lt.cyan().underline(this.active):this.active].join(" "),this.out.write(cs.line+Ne.to(0)+this.outputText))}}var hs=us;let ds=class Fe{constructor({token:t,date:i,parts:r,locales:s}){this.token=t,this.date=i||new Date,this.parts=r||[this],this.locales=s||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find((i,r)=>r>t&&i instanceof Fe)}setTo(t){}prev(){let t=[].concat(this.parts).reverse();const i=t.indexOf(this);return t.find((r,s)=>s>i&&r instanceof Fe)}toString(){return String(this.date)}};var it=ds;const fs=it;let ms=class extends fs{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}};var ps=ms;const ys=it,ws=e=>(e=e%10,e===1?"st":e===2?"nd":e===3?"rd":"th");let gs=class extends ys{constructor(t={}){super(t)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(t){this.date.setDate(parseInt(t.substr(-2)))}toString(){let t=this.date.getDate(),i=this.date.getDay();return this.token==="DD"?String(t).padStart(2,"0"):this.token==="Do"?t+ws(t):this.token==="d"?i+1:this.token==="ddd"?this.locales.weekdaysShort[i]:this.token==="dddd"?this.locales.weekdays[i]:t}};var vs=gs;const bs=it;let Ss=class extends bs{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}};var $s=Ss;const Es=it;let Ps=class extends Es{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};var xs=Ps;const Os=it;let Fs=class extends Os{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}};var Ds=Fs;const Ts=it;let Cs=class extends Ts{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),i=this.token.length;return i===2?String(t+1).padStart(2,"0"):i===3?this.locales.monthsShort[t]:i===4?this.locales.months[t]:String(t+1)}};var ks=Cs;const Ms=it;let _s=class extends Ms{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}};var Is=_s;const js=it;let As=class extends js{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}};var Ns=As,Rs={DatePart:it,Meridiem:ps,Day:vs,Hours:$s,Milliseconds:xs,Minutes:Ds,Month:ks,Seconds:Is,Year:Ns};const ne=K,Ls=ot,{style:Re,clear:Le,figures:Ys}=z,{erase:Ws,cursor:Ye}=G,{DatePart:We,Meridiem:Bs,Day:Js,Hours:Vs,Milliseconds:Hs,Minutes:Us,Month:Ks,Seconds:Gs,Year:qs}=Rs,zs=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,Be={1:({token:e})=>e.replace(/\\(.)/g,"$1"),2:e=>new Js(e),3:e=>new Ks(e),4:e=>new qs(e),5:e=>new Bs(e),6:e=>new Vs(e),7:e=>new Us(e),8:e=>new Gs(e),9:e=>new Hs(e)},Zs={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class Qs extends Ls{constructor(t={}){super(t),this.msg=t.message,this.cursor=0,this.typed="",this.locales=Object.assign(Zs,t.locales),this._date=t.initial||new Date,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.mask=t.mask||"YYYY-MM-DD HH:mm:ss",this.clear=Le("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(t){t&&this._date.setTime(t.getTime())}set mask(t){let i;for(this.parts=[];i=zs.exec(t);){let s=i.shift(),n=i.findIndex(o=>o!=null);this.parts.push(n in Be?Be[n]({token:i[n]||s,date:this.date,parts:this.parts,locales:this.locales}):i[n]||s)}let r=this.parts.reduce((s,n)=>(typeof n=="string"&&typeof s[s.length-1]=="string"?s[s.length-1]+=n:s.push(n),s),[]);this.parts.splice(0),this.parts.push(...r),this.reset()}moveCursor(t){this.typed="",this.cursor=t,this.fire()}reset(){this.moveCursor(this.parts.findIndex(t=>t instanceof We)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let t=this.parts[this.cursor].prev();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}right(){let t=this.parts[this.cursor].next();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}next(){let t=this.parts[this.cursor].next();this.moveCursor(t?this.parts.indexOf(t):this.parts.findIndex(i=>i instanceof We)),this.render()}_(t){/\d/.test(t)&&(this.typed+=t,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(Ye.hide):this.out.write(Le(this.outputText,this.out.columns)),super.render(),this.outputText=[Re.symbol(this.done,this.aborted),ne.bold(this.msg),Re.delimiter(!1),this.parts.reduce((t,i,r)=>t.concat(r===this.cursor&&!this.done?ne.cyan().underline(i.toString()):i),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((t,i,r)=>t+`
${r?" ":Ys.pointerSmall} ${ne.red().italic(i)}`,"")),this.out.write(Ws.line+Ye.to(0)+this.outputText))}}var Xs=Qs;const Yt=K,tn=ot,{cursor:Wt,erase:en}=G,{style:oe,figures:rn,clear:Je,lines:sn}=z,nn=/[0-9]/,ae=e=>e!==void 0,Ve=(e,t)=>{let i=Math.pow(10,t);return Math.round(e*i)/i};class on extends tn{constructor(t={}){super(t),this.transform=oe.render(t.style),this.msg=t.message,this.initial=ae(t.initial)?t.initial:"",this.float=!!t.float,this.round=t.round||2,this.inc=t.increment||1,this.min=ae(t.min)?t.min:-1/0,this.max=ae(t.max)?t.max:1/0,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){!t&&t!==0?(this.placeholder=!0,this.rendered=Yt.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${Ve(t,this.round)}`),this._value=Ve(t,this.round)),this.fire()}get value(){return this._value}parse(t){return this.float?parseFloat(t):parseInt(t)}valid(t){return t==="-"||t==="."&&this.float||nn.test(t)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let t=this.value;this.value=t!==""?t:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let t=this.value;this.value=t!==""?t:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let t=this.value.toString();if(t.length===0)return this.bell();this.value=this.parse(t=t.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(t,i){if(!this.valid(t))return this.bell();const r=Date.now();if(r-this.lastHit>1e3&&(this.typed=""),this.typed+=t,this.lastHit=r,this.color="cyan",t===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(Wt.down(sn(this.outputError,this.out.columns)-1)+Je(this.outputError,this.out.columns)),this.out.write(Je(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[oe.symbol(this.done,this.aborted),Yt.bold(this.msg),oe.delimiter(this.done),!this.done||!this.done&&!this.placeholder?Yt[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,i,r)=>t+`
${r?" ":rn.pointerSmall} ${Yt.red().italic(i)}`,"")),this.out.write(en.line+Wt.to(0)+this.outputText+Wt.save+this.outputError+Wt.restore))}}var an=on;const Z=K,{cursor:ln}=G,cn=ot,{clear:He,figures:at,style:Ue,wrap:un,entriesToDisplay:hn}=z;let dn=class extends cn{constructor(t={}){super(t),this.msg=t.message,this.cursor=t.cursor||0,this.scrollIndex=t.cursor||0,this.hint=t.hint||"",this.warn=t.warn||"- This option is disabled -",this.minSelected=t.min,this.showMinError=!1,this.maxChoices=t.max,this.instructions=t.instructions,this.optionsPerPage=t.optionsPerPage||10,this.value=t.choices.map((i,r)=>(typeof i=="string"&&(i={title:i,value:r}),{title:i&&(i.title||i.value||i),description:i&&i.description,value:i&&(i.value===void 0?r:i.value),selected:i&&i.selected,disabled:i&&i.disabled})),this.clear=He("",this.out.columns),t.overrideRender||this.render()}reset(){this.value.map(t=>!t.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(t=>t.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const t=this.value.filter(i=>i.selected);this.minSelected&&t.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const t=this.value[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const t=!this.value[this.cursor].selected;this.value.filter(i=>!i.disabled).forEach(i=>i.selected=t),this.render()}_(t,i){if(t===" ")this.handleSpaceToggle();else if(t==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${at.arrowUp}/${at.arrowDown}: Highlight option
    ${at.arrowLeft}/${at.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(t,i,r,s){const n=(i.selected?Z.green(at.radioOn):at.radioOff)+" "+s+" ";let o,l;return i.disabled?o=t===r?Z.gray().underline(i.title):Z.strikethrough().gray(i.title):(o=t===r?Z.cyan().underline(i.title):i.title,t===r&&i.description&&(l=` - ${i.description}`,(n.length+o.length+l.length>=this.out.columns||i.description.split(/\r?\n/).length>1)&&(l=`
`+un(i.description,{margin:n.length,width:this.out.columns})))),n+o+Z.gray(l||"")}paginateOptions(t){if(t.length===0)return Z.red("No matches for this query.");let{startIndex:i,endIndex:r}=hn(this.cursor,t.length,this.optionsPerPage),s,n=[];for(let o=i;o<r;o++)o===i&&i>0?s=at.arrowUp:o===r-1&&r<t.length?s=at.arrowDown:s=" ",n.push(this.renderOption(this.cursor,t[o],o,s));return`
`+n.join(`
`)}renderOptions(t){return this.done?"":this.paginateOptions(t)}renderDoneOrInstructions(){if(this.done)return this.value.filter(i=>i.selected).map(i=>i.title).join(", ");const t=[Z.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(Z.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(ln.hide),super.render();let t=[Ue.symbol(this.done,this.aborted),Z.bold(this.msg),Ue.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=Z.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.value),this.out.write(this.clear+t),this.clear=He(t,this.out.columns)}};var Ke=dn;const Tt=K,fn=ot,{erase:mn,cursor:Ge}=G,{style:le,clear:qe,figures:ce,wrap:pn,entriesToDisplay:yn}=z,ze=(e,t)=>e[t]&&(e[t].value||e[t].title||e[t]),wn=(e,t)=>e[t]&&(e[t].title||e[t].value||e[t]),gn=(e,t)=>{const i=e.findIndex(r=>r.value===t||r.title===t);return i>-1?i:void 0};class vn extends fn{constructor(t={}){super(t),this.msg=t.message,this.suggest=t.suggest,this.choices=t.choices,this.initial=typeof t.initial=="number"?t.initial:gn(t.choices,t.initial),this.select=this.initial||t.cursor||0,this.i18n={noMatches:t.noMatches||"no matches found"},this.fallback=t.fallback||this.initial,this.clearFirst=t.clearFirst||!1,this.suggestions=[],this.input="",this.limit=t.limit||10,this.cursor=0,this.transform=le.render(t.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=qe("",this.out.columns),this.complete(this.render),this.render()}set fallback(t){this._fb=Number.isSafeInteger(parseInt(t))?parseInt(t):t}get fallback(){let t;return typeof this._fb=="number"?t=this.choices[this._fb]:typeof this._fb=="string"&&(t={title:this._fb}),t||this._fb||{title:this.i18n.noMatches}}moveSelect(t){this.select=t,this.suggestions.length>0?this.value=ze(this.suggestions,t):this.value=this.fallback.value,this.fire()}async complete(t){const i=this.completing=this.suggest(this.input,this.choices),r=await i;if(this.completing!==i)return;this.suggestions=r.map((n,o,l)=>({title:wn(l,o),value:ze(l,o),description:n.description})),this.completing=!1;const s=Math.max(r.length-1,0);this.moveSelect(Math.min(s,this.select)),t&&t()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,i){let r=this.input.slice(0,this.cursor),s=this.input.slice(this.cursor);this.input=`${r}${t}${s}`,this.cursor=r.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let t=this.input.slice(0,this.cursor-1),i=this.input.slice(this.cursor);this.input=`${t}${i}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let t=this.input.slice(0,this.cursor),i=this.input.slice(this.cursor+1);this.input=`${t}${i}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,i,r,s){let n,o=r?ce.arrowUp:s?ce.arrowDown:" ",l=i?Tt.cyan().underline(t.title):t.title;return o=(i?Tt.cyan(ce.pointer)+" ":"  ")+o,t.description&&(n=` - ${t.description}`,(o.length+l.length+n.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(n=`
`+pn(t.description,{margin:3,width:this.out.columns}))),o+" "+l+Tt.gray(n||"")}render(){if(this.closed)return;this.firstRender?this.out.write(Ge.hide):this.out.write(qe(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:i}=yn(this.select,this.choices.length,this.limit);if(this.outputText=[le.symbol(this.done,this.aborted,this.exited),Tt.bold(this.msg),le.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const r=this.suggestions.slice(t,i).map((s,n)=>this.renderOption(s,this.select===n+t,n===0&&t>0,n+t===i-1&&i<this.choices.length)).join(`
`);this.outputText+=`
`+(r||Tt.gray(this.fallback.title))}this.out.write(mn.line+Ge.to(0)+this.outputText)}}var bn=vn;const rt=K,{cursor:Sn}=G,$n=Ke,{clear:Ze,style:Qe,figures:wt}=z;class En extends $n{constructor(t={}){t.overrideRender=!0,super(t),this.inputValue="",this.clear=Ze("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const t=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(r=>this.inputValue?!!(typeof r.title=="string"&&r.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof r.value=="string"&&r.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const i=this.filteredOptions.findIndex(r=>r===t);this.cursor=i<0?0:i,this.render()}handleSpaceToggle(){const t=this.filteredOptions[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}handleInputChange(t){this.inputValue=this.inputValue+t,this.updateFilteredOptions()}_(t,i){t===" "?this.handleSpaceToggle():this.handleInputChange(t)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${wt.arrowUp}/${wt.arrowDown}: Highlight option
    ${wt.arrowLeft}/${wt.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:rt.gray("Enter something to filter")}
`}renderOption(t,i,r){let s;return i.disabled?s=t===r?rt.gray().underline(i.title):rt.strikethrough().gray(i.title):s=t===r?rt.cyan().underline(i.title):i.title,(i.selected?rt.green(wt.radioOn):wt.radioOff)+"  "+s}renderDoneOrInstructions(){if(this.done)return this.value.filter(i=>i.selected).map(i=>i.title).join(", ");const t=[rt.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(rt.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Sn.hide),super.render();let t=[Qe.symbol(this.done,this.aborted),rt.bold(this.msg),Qe.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=rt.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+t),this.clear=Ze(t,this.out.columns)}}var Pn=En;const Xe=K,xn=ot,{style:ti,clear:On}=z,{erase:Fn,cursor:ei}=G;class Dn extends xn{constructor(t={}){super(t),this.msg=t.message,this.value=t.initial,this.initialValue=!!t.initial,this.yesMsg=t.yes||"yes",this.yesOption=t.yesOption||"(Y/n)",this.noMsg=t.no||"no",this.noOption=t.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,i){return t.toLowerCase()==="y"?(this.value=!0,this.submit()):t.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(ei.hide):this.out.write(On(this.outputText,this.out.columns)),super.render(),this.outputText=[ti.symbol(this.done,this.aborted),Xe.bold(this.msg),ti.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:Xe.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(Fn.line+ei.to(0)+this.outputText))}}var Tn=Dn,Cn={TextPrompt:ts,SelectPrompt:os,TogglePrompt:hs,DatePrompt:Xs,NumberPrompt:an,MultiselectPrompt:Ke,AutocompletePrompt:bn,AutocompleteMultiselectPrompt:Pn,ConfirmPrompt:Tn};(function(e){const t=e,i=Cn,r=o=>o;function s(o,l,p={}){return new Promise((d,a)=>{const h=new i[o](l),c=p.onAbort||r,u=p.onSubmit||r,f=p.onExit||r;h.on("state",l.onState||r),h.on("submit",b=>d(u(b))),h.on("exit",b=>d(f(b))),h.on("abort",b=>a(c(b)))})}t.text=o=>s("TextPrompt",o),t.password=o=>(o.style="password",t.text(o)),t.invisible=o=>(o.style="invisible",t.text(o)),t.number=o=>s("NumberPrompt",o),t.date=o=>s("DatePrompt",o),t.confirm=o=>s("ConfirmPrompt",o),t.list=o=>{const l=o.separator||",";return s("TextPrompt",o,{onSubmit:p=>p.split(l).map(d=>d.trim())})},t.toggle=o=>s("TogglePrompt",o),t.select=o=>s("SelectPrompt",o),t.multiselect=o=>{o.choices=[].concat(o.choices||[]);const l=p=>p.filter(d=>d.selected).map(d=>d.value);return s("MultiselectPrompt",o,{onAbort:l,onSubmit:l})},t.autocompleteMultiselect=o=>{o.choices=[].concat(o.choices||[]);const l=p=>p.filter(d=>d.selected).map(d=>d.value);return s("AutocompleteMultiselectPrompt",o,{onAbort:l,onSubmit:l})};const n=(o,l)=>Promise.resolve(l.filter(p=>p.title.slice(0,o.length).toLowerCase()===o.toLowerCase()));t.autocomplete=o=>(o.suggest=o.suggest||n,o.choices=[].concat(o.choices||[]),s("AutocompletePrompt",o))})(Te);const ue=Te,kn=["suggest","format","onState","validate","onRender","type"],ii=()=>{};async function lt(e=[],{onSubmit:t=ii,onCancel:i=ii}={}){const r={},s=lt._override||{};e=[].concat(e);let n,o,l,p,d,a;const h=async(c,u,f=!1)=>{if(!(!f&&c.validate&&c.validate(u)!==!0))return c.format?await c.format(u,r):u};for(o of e)if({name:p,type:d}=o,typeof d=="function"&&(d=await d(n,{...r},o),o.type=d),!!d){for(let c in o){if(kn.includes(c))continue;let u=o[c];o[c]=typeof u=="function"?await u(n,{...r},a):u}if(a=o,typeof o.message!="string")throw new Error("prompt message is required");if({name:p,type:d}=o,ue[d]===void 0)throw new Error(`prompt type (${d}) is not defined`);if(s[o.name]!==void 0&&(n=await h(o,s[o.name]),n!==void 0)){r[p]=n;continue}try{n=lt._injected?Mn(lt._injected,o.initial):await ue[d](o),r[p]=n=await h(o,n,!0),l=await t(o,n,r)}catch{l=!await i(o,r)}if(l)return r}return r}function Mn(e,t){const i=e.shift();if(i instanceof Error)throw i;return i===void 0?t:i}function _n(e){lt._injected=(lt._injected||[]).concat(e)}function In(e){lt._override=Object.assign({},e)}var jn=Object.assign(lt,{prompt:lt,prompts:ue,inject:_n,override:In});const ri=Qt(jn);function An(e,t){var i=e;t.slice(0,-1).forEach(function(s){i=i[s]||{}});var r=t[t.length-1];return r in i}function si(e){return typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function ni(e,t){return t==="constructor"&&typeof e[t]=="function"||t==="__proto__"}var Nn=function(e,t){t||(t={});var i={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(i.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?i.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(g){i.bools[g]=!0});var r={};function s(g){return r[g].some(function(M){return i.bools[M]})}Object.keys(t.alias||{}).forEach(function(g){r[g]=[].concat(t.alias[g]),r[g].forEach(function(M){r[M]=[g].concat(r[g].filter(function(U){return M!==U}))})}),[].concat(t.string).filter(Boolean).forEach(function(g){i.strings[g]=!0,r[g]&&[].concat(r[g]).forEach(function(M){i.strings[M]=!0})});var n=t.default||{},o={_:[]};function l(g,M){return i.allBools&&/^--[^=]+$/.test(M)||i.strings[g]||i.bools[g]||r[g]}function p(g,M,U){for(var E=g,tt=0;tt<M.length-1;tt++){var m=M[tt];if(ni(E,m))return;E[m]===void 0&&(E[m]={}),(E[m]===Object.prototype||E[m]===Number.prototype||E[m]===String.prototype)&&(E[m]={}),E[m]===Array.prototype&&(E[m]=[]),E=E[m]}var v=M[M.length-1];ni(E,v)||((E===Object.prototype||E===Number.prototype||E===String.prototype)&&(E={}),E===Array.prototype&&(E=[]),E[v]===void 0||i.bools[v]||typeof E[v]=="boolean"?E[v]=U:Array.isArray(E[v])?E[v].push(U):E[v]=[E[v],U])}function d(g,M,U){if(!(U&&i.unknownFn&&!l(g,U)&&i.unknownFn(U)===!1)){var E=!i.strings[g]&&si(M)?Number(M):M;p(o,g.split("."),E),(r[g]||[]).forEach(function(tt){p(o,tt.split("."),E)})}}Object.keys(i.bools).forEach(function(g){d(g,n[g]===void 0?!1:n[g])});var a=[];e.indexOf("--")!==-1&&(a=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var h=0;h<e.length;h++){var c=e[h],u,f;if(/^--.+=/.test(c)){var b=c.match(/^--([^=]+)=([\s\S]*)$/);u=b[1];var y=b[2];i.bools[u]&&(y=y!=="false"),d(u,y,c)}else if(/^--no-.+/.test(c))u=c.match(/^--no-(.+)/)[1],d(u,!1,c);else if(/^--.+/.test(c))u=c.match(/^--(.+)/)[1],f=e[h+1],f!==void 0&&!/^(-|--)[^-]/.test(f)&&!i.bools[u]&&!i.allBools&&(!r[u]||!s(u))?(d(u,f,c),h+=1):/^(true|false)$/.test(f)?(d(u,f==="true",c),h+=1):d(u,i.strings[u]?"":!0,c);else if(/^-[^-]+/.test(c)){for(var w=c.slice(1,-1).split(""),k=!1,S=0;S<w.length;S++){if(f=c.slice(S+2),f==="-"){d(w[S],f,c);continue}if(/[A-Za-z]/.test(w[S])&&f[0]==="="){d(w[S],f.slice(1),c),k=!0;break}if(/[A-Za-z]/.test(w[S])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){d(w[S],f,c),k=!0;break}if(w[S+1]&&w[S+1].match(/\W/)){d(w[S],c.slice(S+2),c),k=!0;break}else d(w[S],i.strings[w[S]]?"":!0,c)}u=c.slice(-1)[0],!k&&u!=="-"&&(e[h+1]&&!/^(-|--)[^-]/.test(e[h+1])&&!i.bools[u]&&(!r[u]||!s(u))?(d(u,e[h+1],c),h+=1):e[h+1]&&/^(true|false)$/.test(e[h+1])?(d(u,e[h+1]==="true",c),h+=1):d(u,i.strings[u]?"":!0,c))}else if((!i.unknownFn||i.unknownFn(c)!==!1)&&o._.push(i.strings._||!si(c)?c:Number(c)),t.stopEarly){o._.push.apply(o._,e.slice(h+1));break}}return Object.keys(n).forEach(function(g){An(o,g.split("."))||(p(o,g.split("."),n[g]),(r[g]||[]).forEach(function(M){p(o,M.split("."),n[g])}))}),t["--"]?o["--"]=a.slice():a.forEach(function(g){o._.push(g)}),o};const Rn=Qt(Nn);var J={},j={};j.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((i,r)=>{t.push((s,n)=>s!=null?r(s):i(n)),e.apply(this,t)})},"name",{value:e.name})},j.fromPromise=function(e){return Object.defineProperty(function(...t){const i=t[t.length-1];if(typeof i!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(r=>i(null,r),i)},"name",{value:e.name})};var ct=hr,Ln=process.cwd,Bt=null,Yn=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Bt||(Bt=Ln.call(process)),Bt};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var oi=process.chdir;process.chdir=function(e){Bt=null,oi.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,oi)}var Wn=Bn;function Bn(e){ct.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||i(e),e.chown=n(e.chown),e.fchown=n(e.fchown),e.lchown=n(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=s(e.chmodSync),e.fchmodSync=s(e.fchmodSync),e.lchmodSync=s(e.lchmodSync),e.stat=l(e.stat),e.fstat=l(e.fstat),e.lstat=l(e.lstat),e.statSync=p(e.statSync),e.fstatSync=p(e.fstatSync),e.lstatSync=p(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(a,h,c){c&&process.nextTick(c)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(a,h,c,u){u&&process.nextTick(u)},e.lchownSync=function(){}),Yn==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(a){function h(c,u,f){var b=Date.now(),y=0;a(c,u,function w(k){if(k&&(k.code==="EACCES"||k.code==="EPERM"||k.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){e.stat(u,function(S,g){S&&S.code==="ENOENT"?a(c,u,w):f(k)})},y),y<100&&(y+=10);return}f&&f(k)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,a),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(a){function h(c,u,f,b,y,w){var k;if(w&&typeof w=="function"){var S=0;k=function(g,M,U){if(g&&g.code==="EAGAIN"&&S<10)return S++,a.call(e,c,u,f,b,y,k);w.apply(this,arguments)}}return a.call(e,c,u,f,b,y,k)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,a),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(a){return function(h,c,u,f,b){for(var y=0;;)try{return a.call(e,h,c,u,f,b)}catch(w){if(w.code==="EAGAIN"&&y<10){y++;continue}throw w}}}(e.readSync);function t(a){a.lchmod=function(h,c,u){a.open(h,ct.O_WRONLY|ct.O_SYMLINK,c,function(f,b){if(f){u&&u(f);return}a.fchmod(b,c,function(y){a.close(b,function(w){u&&u(y||w)})})})},a.lchmodSync=function(h,c){var u=a.openSync(h,ct.O_WRONLY|ct.O_SYMLINK,c),f=!0,b;try{b=a.fchmodSync(u,c),f=!1}finally{if(f)try{a.closeSync(u)}catch{}else a.closeSync(u)}return b}}function i(a){ct.hasOwnProperty("O_SYMLINK")&&a.futimes?(a.lutimes=function(h,c,u,f){a.open(h,ct.O_SYMLINK,function(b,y){if(b){f&&f(b);return}a.futimes(y,c,u,function(w){a.close(y,function(k){f&&f(w||k)})})})},a.lutimesSync=function(h,c,u){var f=a.openSync(h,ct.O_SYMLINK),b,y=!0;try{b=a.futimesSync(f,c,u),y=!1}finally{if(y)try{a.closeSync(f)}catch{}else a.closeSync(f)}return b}):a.futimes&&(a.lutimes=function(h,c,u,f){f&&process.nextTick(f)},a.lutimesSync=function(){})}function r(a){return a&&function(h,c,u){return a.call(e,h,c,function(f){d(f)&&(f=null),u&&u.apply(this,arguments)})}}function s(a){return a&&function(h,c){try{return a.call(e,h,c)}catch(u){if(!d(u))throw u}}}function n(a){return a&&function(h,c,u,f){return a.call(e,h,c,u,function(b){d(b)&&(b=null),f&&f.apply(this,arguments)})}}function o(a){return a&&function(h,c,u){try{return a.call(e,h,c,u)}catch(f){if(!d(f))throw f}}}function l(a){return a&&function(h,c,u){typeof c=="function"&&(u=c,c=null);function f(b,y){y&&(y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296)),u&&u.apply(this,arguments)}return c?a.call(e,h,c,f):a.call(e,h,f)}}function p(a){return a&&function(h,c){var u=c?a.call(e,h,c):a.call(e,h);return u&&(u.uid<0&&(u.uid+=4294967296),u.gid<0&&(u.gid+=4294967296)),u}}function d(a){if(!a||a.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(a.code==="EINVAL"||a.code==="EPERM"))}}var ai=dr.Stream,Jn=Vn;function Vn(e){return{ReadStream:t,WriteStream:i};function t(r,s){if(!(this instanceof t))return new t(r,s);ai.call(this);var n=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var o=Object.keys(s),l=0,p=o.length;l<p;l++){var d=o[l];this[d]=s[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}e.open(this.path,this.flags,this.mode,function(a,h){if(a){n.emit("error",a),n.readable=!1;return}n.fd=h,n.emit("open",h),n._read()})}function i(r,s){if(!(this instanceof i))return new i(r,s);ai.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var n=Object.keys(s),o=0,l=n.length;o<l;o++){var p=n[o];this[p]=s[p]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Hn=Kn,Un=Object.getPrototypeOf||function(e){return e.__proto__};function Kn(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Un(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}),t}var C=De,Gn=Wn,qn=Jn,zn=Hn,Jt=fr,W,Vt;typeof Symbol=="function"&&typeof Symbol.for=="function"?(W=Symbol.for("graceful-fs.queue"),Vt=Symbol.for("graceful-fs.previous")):(W="___graceful-fs.queue",Vt="___graceful-fs.previous");function Zn(){}function li(e,t){Object.defineProperty(e,W,{get:function(){return t}})}var ft=Zn;if(Jt.debuglog?ft=Jt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ft=function(){var e=Jt.format.apply(Jt,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)}),!C[W]){var Qn=Zt[W]||[];li(C,Qn),C.close=function(e){function t(i,r){return e.call(C,i,function(s){s||ci(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,Vt,{value:e}),t}(C.close),C.closeSync=function(e){function t(i){e.apply(C,arguments),ci()}return Object.defineProperty(t,Vt,{value:e}),t}(C.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ft(C[W]),pr.equal(C[W].length,0)})}Zt[W]||li(Zt,C[W]);var gt=he(zn(C));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!C.__patched&&(gt=he(C),C.__patched=!0);function he(e){Gn(e),e.gracefulify=he,e.createReadStream=M,e.createWriteStream=U;var t=e.readFile;e.readFile=i;function i(m,v,$){return typeof v=="function"&&($=v,v=null),R(m,v,$);function R(L,A,D,_){return t(L,A,function(x){x&&(x.code==="EMFILE"||x.code==="ENFILE")?vt([R,[L,A,D],x,_||Date.now(),Date.now()]):typeof D=="function"&&D.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=s;function s(m,v,$,R){return typeof $=="function"&&(R=$,$=null),L(m,v,$,R);function L(A,D,_,x,Y){return r(A,D,_,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?vt([L,[A,D,_,x],F,Y||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var n=e.appendFile;n&&(e.appendFile=o);function o(m,v,$,R){return typeof $=="function"&&(R=$,$=null),L(m,v,$,R);function L(A,D,_,x,Y){return n(A,D,_,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?vt([L,[A,D,_,x],F,Y||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var l=e.copyFile;l&&(e.copyFile=p);function p(m,v,$,R){return typeof $=="function"&&(R=$,$=0),L(m,v,$,R);function L(A,D,_,x,Y){return l(A,D,_,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?vt([L,[A,D,_,x],F,Y||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var d=e.readdir;e.readdir=h;var a=/^v[0-5]\./;function h(m,v,$){typeof v=="function"&&($=v,v=null);var R=a.test(process.version)?function(D,_,x,Y){return d(D,L(D,_,x,Y))}:function(D,_,x,Y){return d(D,_,L(D,_,x,Y))};return R(m,v,$);function L(A,D,_,x){return function(Y,F){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?vt([R,[A,D,_],Y,x||Date.now(),Date.now()]):(F&&F.sort&&F.sort(),typeof _=="function"&&_.call(this,Y,F))}}}if(process.version.substr(0,4)==="v0.8"){var c=qn(e);w=c.ReadStream,S=c.WriteStream}var u=e.ReadStream;u&&(w.prototype=Object.create(u.prototype),w.prototype.open=k);var f=e.WriteStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=g),Object.defineProperty(e,"ReadStream",{get:function(){return w},set:function(m){w=m},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(m){S=m},enumerable:!0,configurable:!0});var b=w;Object.defineProperty(e,"FileReadStream",{get:function(){return b},set:function(m){b=m},enumerable:!0,configurable:!0});var y=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return y},set:function(m){y=m},enumerable:!0,configurable:!0});function w(m,v){return this instanceof w?(u.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function k(){var m=this;tt(m.path,m.flags,m.mode,function(v,$){v?(m.autoClose&&m.destroy(),m.emit("error",v)):(m.fd=$,m.emit("open",$),m.read())})}function S(m,v){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function g(){var m=this;tt(m.path,m.flags,m.mode,function(v,$){v?(m.destroy(),m.emit("error",v)):(m.fd=$,m.emit("open",$))})}function M(m,v){return new e.ReadStream(m,v)}function U(m,v){return new e.WriteStream(m,v)}var E=e.open;e.open=tt;function tt(m,v,$,R){return typeof $=="function"&&(R=$,$=null),L(m,v,$,R);function L(A,D,_,x,Y){return E(A,D,_,function(F,xl){F&&(F.code==="EMFILE"||F.code==="ENFILE")?vt([L,[A,D,_,x],F,Y||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}return e}function vt(e){ft("ENQUEUE",e[0].name,e[1]),C[W].push(e),de()}var Ht;function ci(){for(var e=Date.now(),t=0;t<C[W].length;++t)C[W][t].length>2&&(C[W][t][3]=e,C[W][t][4]=e);de()}function de(){if(clearTimeout(Ht),Ht=void 0,C[W].length!==0){var e=C[W].shift(),t=e[0],i=e[1],r=e[2],s=e[3],n=e[4];if(s===void 0)ft("RETRY",t.name,i),t.apply(null,i);else if(Date.now()-s>=6e4){ft("TIMEOUT",t.name,i);var o=i.pop();typeof o=="function"&&o.call(null,r)}else{var l=Date.now()-n,p=Math.max(n-s,1),d=Math.min(p*1.2,100);l>=d?(ft("RETRY",t.name,i),t.apply(null,i.concat([s]))):C[W].push(e)}Ht===void 0&&(Ht=setTimeout(de,0))}}(function(e){const t=j.fromCallback,i=gt,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof i[s]=="function");Object.assign(e,i),r.forEach(s=>{e[s]=t(i[s])}),e.exists=function(s,n){return typeof n=="function"?i.exists(s,n):new Promise(o=>i.exists(s,o))},e.read=function(s,n,o,l,p,d){return typeof d=="function"?i.read(s,n,o,l,p,d):new Promise((a,h)=>{i.read(s,n,o,l,p,(c,u,f)=>{if(c)return h(c);a({bytesRead:u,buffer:f})})})},e.write=function(s,n,...o){return typeof o[o.length-1]=="function"?i.write(s,n,...o):new Promise((l,p)=>{i.write(s,n,...o,(d,a,h)=>{if(d)return p(d);l({bytesWritten:a,buffer:h})})})},e.readv=function(s,n,...o){return typeof o[o.length-1]=="function"?i.readv(s,n,...o):new Promise((l,p)=>{i.readv(s,n,...o,(d,a,h)=>{if(d)return p(d);l({bytesRead:a,buffers:h})})})},e.writev=function(s,n,...o){return typeof o[o.length-1]=="function"?i.writev(s,n,...o):new Promise((l,p)=>{i.writev(s,n,...o,(d,a,h)=>{if(d)return p(d);l({bytesWritten:a,buffers:h})})})},typeof i.realpath.native=="function"?e.realpath.native=t(i.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(J);var fe={},ui={};const Xn=I;ui.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Xn.parse(t).root,""))){const r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}};const hi=J,{checkPath:di}=ui,fi=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};fe.makeDir=async(e,t)=>(di(e),hi.mkdir(e,{mode:fi(t),recursive:!0})),fe.makeDirSync=(e,t)=>(di(e),hi.mkdirSync(e,{mode:fi(t),recursive:!0}));const to=j.fromPromise,{makeDir:eo,makeDirSync:me}=fe,pe=to(eo);var Q={mkdirs:pe,mkdirsSync:me,mkdirp:pe,mkdirpSync:me,ensureDir:pe,ensureDirSync:me};const io=j.fromPromise,mi=J;function ro(e){return mi.access(e).then(()=>!0).catch(()=>!1)}var mt={pathExists:io(ro),pathExistsSync:mi.existsSync};const bt=J,so=j.fromPromise;async function no(e,t,i){const r=await bt.open(e,"r+");let s=null;try{await bt.futimes(r,t,i)}finally{try{await bt.close(r)}catch(n){s=n}}if(s)throw s}function oo(e,t,i){const r=bt.openSync(e,"r+");return bt.futimesSync(r,t,i),bt.closeSync(r)}var pi={utimesMillis:so(no),utimesMillisSync:oo};const St=J,N=I,yi=j.fromPromise;function ao(e,t,i){const r=i.dereference?s=>St.stat(s,{bigint:!0}):s=>St.lstat(s,{bigint:!0});return Promise.all([r(e),r(t).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,n])=>({srcStat:s,destStat:n}))}function lo(e,t,i){let r;const s=i.dereference?o=>St.statSync(o,{bigint:!0}):o=>St.lstatSync(o,{bigint:!0}),n=s(e);try{r=s(t)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:r}}async function co(e,t,i,r){const{srcStat:s,destStat:n}=await ao(e,t,r);if(n){if(Ct(s,n)){const o=N.basename(e),l=N.basename(t);if(i==="move"&&o!==l&&o.toLowerCase()===l.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(s.isDirectory()&&ye(e,t))throw new Error(Ut(e,t,i));return{srcStat:s,destStat:n}}function uo(e,t,i,r){const{srcStat:s,destStat:n}=lo(e,t,r);if(n){if(Ct(s,n)){const o=N.basename(e),l=N.basename(t);if(i==="move"&&o!==l&&o.toLowerCase()===l.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(s.isDirectory()&&ye(e,t))throw new Error(Ut(e,t,i));return{srcStat:s,destStat:n}}async function wi(e,t,i,r){const s=N.resolve(N.dirname(e)),n=N.resolve(N.dirname(i));if(n===s||n===N.parse(n).root)return;let o;try{o=await St.stat(n,{bigint:!0})}catch(l){if(l.code==="ENOENT")return;throw l}if(Ct(t,o))throw new Error(Ut(e,i,r));return wi(e,t,n,r)}function gi(e,t,i,r){const s=N.resolve(N.dirname(e)),n=N.resolve(N.dirname(i));if(n===s||n===N.parse(n).root)return;let o;try{o=St.statSync(n,{bigint:!0})}catch(l){if(l.code==="ENOENT")return;throw l}if(Ct(t,o))throw new Error(Ut(e,i,r));return gi(e,t,n,r)}function Ct(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function ye(e,t){const i=N.resolve(e).split(N.sep).filter(s=>s),r=N.resolve(t).split(N.sep).filter(s=>s);return i.every((s,n)=>r[n]===s)}function Ut(e,t,i){return`Cannot ${i} '${e}' to a subdirectory of itself, '${t}'.`}var $t={checkPaths:yi(co),checkPathsSync:uo,checkParentPaths:yi(wi),checkParentPathsSync:gi,isSrcSubdir:ye,areIdentical:Ct};const B=J,kt=I,{mkdirs:ho}=Q,{pathExists:fo}=mt,{utimesMillis:mo}=pi,Mt=$t;async function po(e,t,i={}){typeof i=="function"&&(i={filter:i}),i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:r,destStat:s}=await Mt.checkPaths(e,t,"copy",i);if(await Mt.checkParentPaths(e,r,t,"copy"),!await vi(e,t,i))return;const o=kt.dirname(t);await fo(o)||await ho(o),await bi(s,e,t,i)}async function vi(e,t,i){return i.filter?i.filter(e,t):!0}async function bi(e,t,i,r){const n=await(r.dereference?B.stat:B.lstat)(t);if(n.isDirectory())return vo(n,e,t,i,r);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return yo(n,e,t,i,r);if(n.isSymbolicLink())return bo(e,t,i,r);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function yo(e,t,i,r,s){if(!t)return Si(e,i,r,s);if(s.overwrite)return await B.unlink(r),Si(e,i,r,s);if(s.errorOnExist)throw new Error(`'${r}' already exists`)}async function Si(e,t,i,r){if(await B.copyFile(t,i),r.preserveTimestamps){wo(e.mode)&&await go(i,e.mode);const s=await B.stat(t);await mo(i,s.atime,s.mtime)}return B.chmod(i,e.mode)}function wo(e){return(e&128)===0}function go(e,t){return B.chmod(e,t|128)}async function vo(e,t,i,r,s){t||await B.mkdir(r);const n=await B.readdir(i);await Promise.all(n.map(async o=>{const l=kt.join(i,o),p=kt.join(r,o);if(!await vi(l,p,s))return;const{destStat:a}=await Mt.checkPaths(l,p,"copy",s);return bi(a,l,p,s)})),t||await B.chmod(r,e.mode)}async function bo(e,t,i,r){let s=await B.readlink(t);if(r.dereference&&(s=kt.resolve(process.cwd(),s)),!e)return B.symlink(s,i);let n=null;try{n=await B.readlink(i)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return B.symlink(s,i);throw o}if(r.dereference&&(n=kt.resolve(process.cwd(),n)),Mt.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(Mt.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return await B.unlink(i),B.symlink(s,i)}var So=po;const V=gt,_t=I,$o=Q.mkdirsSync,Eo=pi.utimesMillisSync,It=$t;function Po(e,t,i){typeof i=="function"&&(i={filter:i}),i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:r,destStat:s}=It.checkPathsSync(e,t,"copy",i);if(It.checkParentPathsSync(e,r,t,"copy"),i.filter&&!i.filter(e,t))return;const n=_t.dirname(t);return V.existsSync(n)||$o(n),$i(s,e,t,i)}function $i(e,t,i,r){const n=(r.dereference?V.statSync:V.lstatSync)(t);if(n.isDirectory())return ko(n,e,t,i,r);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return xo(n,e,t,i,r);if(n.isSymbolicLink())return Io(e,t,i,r);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function xo(e,t,i,r,s){return t?Oo(e,i,r,s):Ei(e,i,r,s)}function Oo(e,t,i,r){if(r.overwrite)return V.unlinkSync(i),Ei(e,t,i,r);if(r.errorOnExist)throw new Error(`'${i}' already exists`)}function Ei(e,t,i,r){return V.copyFileSync(t,i),r.preserveTimestamps&&Fo(e.mode,t,i),we(i,e.mode)}function Fo(e,t,i){return Do(e)&&To(i,e),Co(t,i)}function Do(e){return(e&128)===0}function To(e,t){return we(e,t|128)}function we(e,t){return V.chmodSync(e,t)}function Co(e,t){const i=V.statSync(e);return Eo(t,i.atime,i.mtime)}function ko(e,t,i,r,s){return t?Pi(i,r,s):Mo(e.mode,i,r,s)}function Mo(e,t,i,r){return V.mkdirSync(i),Pi(t,i,r),we(i,e)}function Pi(e,t,i){V.readdirSync(e).forEach(r=>_o(r,e,t,i))}function _o(e,t,i,r){const s=_t.join(t,e),n=_t.join(i,e);if(r.filter&&!r.filter(s,n))return;const{destStat:o}=It.checkPathsSync(s,n,"copy",r);return $i(o,s,n,r)}function Io(e,t,i,r){let s=V.readlinkSync(t);if(r.dereference&&(s=_t.resolve(process.cwd(),s)),e){let n;try{n=V.readlinkSync(i)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return V.symlinkSync(s,i);throw o}if(r.dereference&&(n=_t.resolve(process.cwd(),n)),It.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(It.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return jo(s,i)}else return V.symlinkSync(s,i)}function jo(e,t){return V.unlinkSync(t),V.symlinkSync(e,t)}var Ao=Po;const No=j.fromPromise;var ge={copy:No(So),copySync:Ao};const xi=gt,Ro=j.fromCallback;function Lo(e,t){xi.rm(e,{recursive:!0,force:!0},t)}function Yo(e){xi.rmSync(e,{recursive:!0,force:!0})}var Kt={remove:Ro(Lo),removeSync:Yo};const Wo=j.fromPromise,Oi=J,Fi=I,Di=Q,Ti=Kt,Ci=Wo(async function(t){let i;try{i=await Oi.readdir(t)}catch{return Di.mkdirs(t)}return Promise.all(i.map(r=>Ti.remove(Fi.join(t,r))))});function ki(e){let t;try{t=Oi.readdirSync(e)}catch{return Di.mkdirsSync(e)}t.forEach(i=>{i=Fi.join(e,i),Ti.removeSync(i)})}var Bo={emptyDirSync:ki,emptydirSync:ki,emptyDir:Ci,emptydir:Ci};const Jo=j.fromPromise,Mi=I,st=J,_i=Q;async function Vo(e){let t;try{t=await st.stat(e)}catch{}if(t&&t.isFile())return;const i=Mi.dirname(e);let r=null;try{r=await st.stat(i)}catch(s){if(s.code==="ENOENT"){await _i.mkdirs(i),await st.writeFile(e,"");return}else throw s}r.isDirectory()?await st.writeFile(e,""):await st.readdir(i)}function Ho(e){let t;try{t=st.statSync(e)}catch{}if(t&&t.isFile())return;const i=Mi.dirname(e);try{st.statSync(i).isDirectory()||st.readdirSync(i)}catch(r){if(r&&r.code==="ENOENT")_i.mkdirsSync(i);else throw r}st.writeFileSync(e,"")}var Uo={createFile:Jo(Vo),createFileSync:Ho};const Ko=j.fromPromise,Ii=I,ut=J,ji=Q,{pathExists:Go}=mt,{areIdentical:Ai}=$t;async function qo(e,t){let i;try{i=await ut.lstat(t)}catch{}let r;try{r=await ut.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(i&&Ai(r,i))return;const s=Ii.dirname(t);await Go(s)||await ji.mkdirs(s),await ut.link(e,t)}function zo(e,t){let i;try{i=ut.lstatSync(t)}catch{}try{const n=ut.lstatSync(e);if(i&&Ai(n,i))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}const r=Ii.dirname(t);return ut.existsSync(r)||ji.mkdirsSync(r),ut.linkSync(e,t)}var Zo={createLink:Ko(qo),createLinkSync:zo};const ht=I,jt=J,{pathExists:Qo}=mt,Xo=j.fromPromise;async function ta(e,t){if(ht.isAbsolute(e)){try{await jt.lstat(e)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:e,toDst:e}}const i=ht.dirname(t),r=ht.join(i,e);if(await Qo(r))return{toCwd:r,toDst:e};try{await jt.lstat(e)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:e,toDst:ht.relative(i,e)}}function ea(e,t){if(ht.isAbsolute(e)){if(!jt.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const i=ht.dirname(t),r=ht.join(i,e);if(jt.existsSync(r))return{toCwd:r,toDst:e};if(!jt.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:ht.relative(i,e)}}var ia={symlinkPaths:Xo(ta),symlinkPathsSync:ea};const Ni=J,ra=j.fromPromise;async function sa(e,t){if(t)return t;let i;try{i=await Ni.lstat(e)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}function na(e,t){if(t)return t;let i;try{i=Ni.lstatSync(e)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}var oa={symlinkType:ra(sa),symlinkTypeSync:na};const aa=j.fromPromise,Ri=I,X=J,{mkdirs:la,mkdirsSync:ca}=Q,{symlinkPaths:ua,symlinkPathsSync:ha}=ia,{symlinkType:da,symlinkTypeSync:fa}=oa,{pathExists:ma}=mt,{areIdentical:Li}=$t;async function pa(e,t,i){let r;try{r=await X.lstat(t)}catch{}if(r&&r.isSymbolicLink()){const[l,p]=await Promise.all([X.stat(e),X.stat(t)]);if(Li(l,p))return}const s=await ua(e,t);e=s.toDst;const n=await da(s.toCwd,i),o=Ri.dirname(t);return await ma(o)||await la(o),X.symlink(e,t,n)}function ya(e,t,i){let r;try{r=X.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const l=X.statSync(e),p=X.statSync(t);if(Li(l,p))return}const s=ha(e,t);e=s.toDst,i=fa(s.toCwd,i);const n=Ri.dirname(t);return X.existsSync(n)||ca(n),X.symlinkSync(e,t,i)}var wa={createSymlink:aa(pa),createSymlinkSync:ya};const{createFile:Yi,createFileSync:Wi}=Uo,{createLink:Bi,createLinkSync:Ji}=Zo,{createSymlink:Vi,createSymlinkSync:Hi}=wa;var ga={createFile:Yi,createFileSync:Wi,ensureFile:Yi,ensureFileSync:Wi,createLink:Bi,createLinkSync:Ji,ensureLink:Bi,ensureLinkSync:Ji,createSymlink:Vi,createSymlinkSync:Hi,ensureSymlink:Vi,ensureSymlinkSync:Hi};function va(e,{EOL:t=`
`,finalEOL:i=!0,replacer:r=null,spaces:s}={}){const n=i?t:"";return JSON.stringify(e,r,s).replace(/\n/g,t)+n}function ba(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var ve={stringify:va,stripBom:ba};let Et;try{Et=gt}catch{Et=De}const Gt=j,{stringify:Ui,stripBom:Ki}=ve;async function Sa(e,t={}){typeof t=="string"&&(t={encoding:t});const i=t.fs||Et,r="throws"in t?t.throws:!0;let s=await Gt.fromCallback(i.readFile)(e,t);s=Ki(s);let n;try{n=JSON.parse(s,t?t.reviver:null)}catch(o){if(r)throw o.message=`${e}: ${o.message}`,o;return null}return n}const $a=Gt.fromPromise(Sa);function Ea(e,t={}){typeof t=="string"&&(t={encoding:t});const i=t.fs||Et,r="throws"in t?t.throws:!0;try{let s=i.readFileSync(e,t);return s=Ki(s),JSON.parse(s,t.reviver)}catch(s){if(r)throw s.message=`${e}: ${s.message}`,s;return null}}async function Pa(e,t,i={}){const r=i.fs||Et,s=Ui(t,i);await Gt.fromCallback(r.writeFile)(e,s,i)}const xa=Gt.fromPromise(Pa);function Oa(e,t,i={}){const r=i.fs||Et,s=Ui(t,i);return r.writeFileSync(e,s,i)}const Fa={readFile:$a,readFileSync:Ea,writeFile:xa,writeFileSync:Oa};var Da=Fa;const qt=Da;var Ta={readJson:qt.readFile,readJsonSync:qt.readFileSync,writeJson:qt.writeFile,writeJsonSync:qt.writeFileSync};const Ca=j.fromPromise,be=J,Gi=I,qi=Q,ka=mt.pathExists;async function Ma(e,t,i="utf-8"){const r=Gi.dirname(e);return await ka(r)||await qi.mkdirs(r),be.writeFile(e,t,i)}function _a(e,...t){const i=Gi.dirname(e);be.existsSync(i)||qi.mkdirsSync(i),be.writeFileSync(e,...t)}var Se={outputFile:Ca(Ma),outputFileSync:_a};const{stringify:Ia}=ve,{outputFile:ja}=Se;async function Aa(e,t,i={}){const r=Ia(t,i);await ja(e,r,i)}var Na=Aa;const{stringify:Ra}=ve,{outputFileSync:La}=Se;function Ya(e,t,i){const r=Ra(t,i);La(e,r,i)}var Wa=Ya;const Ba=j.fromPromise,H=Ta;H.outputJson=Ba(Na),H.outputJsonSync=Wa,H.outputJSON=H.outputJson,H.outputJSONSync=H.outputJsonSync,H.writeJSON=H.writeJson,H.writeJSONSync=H.writeJsonSync,H.readJSON=H.readJson,H.readJSONSync=H.readJsonSync;var Ja=H;const Va=J,zi=I,{copy:Ha}=ge,{remove:Zi}=Kt,{mkdirp:Ua}=Q,{pathExists:Ka}=mt,Qi=$t;async function Ga(e,t,i={}){const r=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:n=!1}=await Qi.checkPaths(e,t,"move",i);await Qi.checkParentPaths(e,s,t,"move");const o=zi.dirname(t);return zi.parse(o).root!==o&&await Ua(o),qa(e,t,r,n)}async function qa(e,t,i,r){if(!r){if(i)await Zi(t);else if(await Ka(t))throw new Error("dest already exists.")}try{await Va.rename(e,t)}catch(s){if(s.code!=="EXDEV")throw s;await za(e,t,i)}}async function za(e,t,i){return await Ha(e,t,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),Zi(e)}var Za=Ga;const Xi=gt,$e=I,Qa=ge.copySync,tr=Kt.removeSync,Xa=Q.mkdirpSync,er=$t;function tl(e,t,i){i=i||{};const r=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:n=!1}=er.checkPathsSync(e,t,"move",i);return er.checkParentPathsSync(e,s,t,"move"),el(t)||Xa($e.dirname(t)),il(e,t,r,n)}function el(e){const t=$e.dirname(e);return $e.parse(t).root===t}function il(e,t,i,r){if(r)return Ee(e,t,i);if(i)return tr(t),Ee(e,t,i);if(Xi.existsSync(t))throw new Error("dest already exists.");return Ee(e,t,i)}function Ee(e,t,i){try{Xi.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return rl(e,t,i)}}function rl(e,t,i){return Qa(e,t,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),tr(e)}var sl=tl;const nl=j.fromPromise;var ol={move:nl(Za),moveSync:sl},al={...J,...ge,...Bo,...ga,...Ja,...Q,...ol,...Se,...mt,...Kt};const nt=Qt(al);let pt=!0;const Pt=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let At=0;if(Pt.process&&Pt.process.env&&Pt.process.stdout){const{FORCE_COLOR:e,NODE_DISABLE_COLORS:t,NO_COLOR:i,TERM:r,COLORTERM:s}=Pt.process.env;t||i||e==="0"?pt=!1:e==="1"||e==="2"||e==="3"?pt=!0:r==="dumb"?pt=!1:"CI"in Pt.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in Pt.process.env)?pt=!0:pt=process.stdout.isTTY,pt&&(process.platform==="win32"||s&&(s==="truecolor"||s==="24bit")?At=3:r&&(r.endsWith("-256color")||r.endsWith("256"))?At=2:At=1)}let ir={enabled:pt,supportLevel:At};function Pe(e,t,i=1){const r=`\x1B[${e}m`,s=`\x1B[${t}m`,n=new RegExp(`\\x1b\\[${t}m`,"g");return o=>ir.enabled&&ir.supportLevel>=i?r+(""+o).replace(n,r)+s:""+o}const xt=Pe(31,39),ll=Pe(32,39),xe=Pe(36,39),rr="12.0.0",sr="6.0.0",cl=mr(yr),ul=Rn(process.argv.slice(2),{string:["_"]}),Oe="vueform-project",nr=wl(process.env.npm_config_user_agent),hl=nr?nr.name:"npm",dl=I.dirname(vr(import.meta.url)),or=[{title:"Vite",value:"vite",command:"npm create vite@latest %PROJECT_NAME% -- --template %TEMPLATE% --overwrite=yes"},{title:"Nuxt",value:"nuxt",command:"npx nuxi@latest init %PROJECT_NAME% --packageManager=%PACKAGE_MANAGER% --gitInit=false"},{title:"Astro",value:"astro",command:"npm create astro@latest %PROJECT_NAME% -- --install=yes --template=basics"},{title:"Laravel",value:"laravel",command:"%COMPOSER_PATH% create-project laravel/laravel %PROJECT_NAME%"}],fl=[{title:"Vueform",value:"vueform"},{title:"Tailwind",value:"tailwind"},{title:"Bootstrap",value:"bootstrap"},{title:"Material",value:"material"},{title:"Tailwind Material",value:"tailwind-material"}],ml={vite:{install:["npm install -D tailwindcss postcss autoprefixer"]},nuxt:{install:["npm install -D @nuxtjs/tailwindcss"]},astro:{install:["npm install @astrojs/tailwind tailwindcss"]},laravel:{install:["npm install -D tailwindcss postcss autoprefixer"]}};process.env.PATH+=":/usr/local/bin",Pl();async function pl(){await gl(I.join(process.cwd(),Oe))&&await q("rm",["-r",Oe]);try{const{projectName:e}=await ri({type:"text",name:"projectName",initial:Oe,message:"What is your project name?",validate:async y=>/^[a-zA-Z0-9]+[a-zA-Z0-9-_]*$/.test(y)?y?!0:"Please provide a project name":"Invalid project name. Use only alphanumeric, underscore, and hyphen characters and do not start with a hyphen or underscore."},{onCancel:()=>{throw new Error(xt("\u2716")+" Operation cancelled")}}),t=await ri([{type:"select",name:"builder",message:"Which libraries do you want to install?",choices:[{title:"Vueform",value:"vueform"},{title:"Vueform + Builder",value:"builder"}]},{type:y=>y==="builder"?"text":null,name:"publicKey",initial:ul.publicKey||"obtain a FREE one at https://app.vueform.com",message:"Your Public Key: ",validate:async y=>/^[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}$/.test(y)?y?!0:"Please provide your Public Key. If you don't have one go to https://app.vueform.com and generate one for FREE.":"Invalid Public Key. Please go to https://app.vueform.com and generate one for FREE."},{type:"select",name:"framework",message:"Choose a framework:",choices:or},{type:y=>y!=="vite"||y==="laravel"?null:"toggle",name:"ts",message:"Do you plan to use TypeScript?",initial:"yes",active:"yes",inactive:"no"},{type:(y,{builder:w})=>w==="builder"?null:"select",name:"theme",message:"Select a theme for your project:",choices:fl}],{onCancel:()=>{throw new Error(xt("\u2716")+" Operation cancelled")}}),{framework:i,ts:r,builder:s,publicKey:n}=t,o=s==="builder"?"tailwind":t.theme;if(e&&i){const y=yl(i);zt(`Creating project '${e}' using ${y.title}...`);const w=i==="vite"?`vue${r?"-ts":""}`:"";let k="";i==="laravel"&&(k=await El());const S=y.command.replace("%PROJECT_NAME%",e).replace("%TEMPLATE%",w).replace("%PACKAGE_MANAGER%",hl).replace("%COMPOSER_PATH%",k).split(" ");await q(S[0],S.slice(1),`create project with ${y.title}`)}else{console.error("Project creation canceled.");return}if(!o){console.error("Project creation canceled.");return}process.chdir(e),zt("Installing dependencies..."),await q("npm",["install"],"install dependencies");const l=i==="astro",p=await vl(process.cwd(),i,r),d=s==="builder",a=["tailwind","tailwind-material"].indexOf(o)!==-1||d,h=["bootstrap"].indexOf(o)!==-1,c=i==="laravel",u=I.join(dl,"../","templates",s,i,o,p?"ts":"js"),f=process.cwd();a&&(zt(`
Installing Tailwind...`),await Promise.all(ml[i].install.map(async y=>{const w=y.split(" ");await q(w[0],w.slice(1),"install Tailwind CSS")}))),h&&(console.log(`
Installing Bootstrap...`),await q("npm",["install","bootstrap"],"install Bootstrap")),l&&(console.log(`
Installing Vue...`),await q("npm",["install","vue","@astrojs/vue"],"install Vue in Astro"),await bl(process.cwd())),c&&(console.log(`
Installing Vue...`),await q("npm",["install","@vitejs/plugin-vue"],"install Vue in Laravel"));const b=d?i==="nuxt"?"@vueform/builder-nuxt":"@vueform/vueform @vueform/builder":i==="nuxt"?"@vueform/nuxt":"@vueform/vueform";zt(`
Installing Vueform${d?" Builder":""}...`),await q("npm",["install",...b.split(" ")],`install ${b}`),await $l(u,f),d&&await Sl(process.cwd(),n),console.log(ll(`
\u2714 Installation finished`)),console.log(`
Start your project with:`),console.log(xe(`cd ${e}`)),console.log(xe("npm run dev")),c?(await q("npm",["run","build"]),await q("php",["artisan","serve"])):await q("npm",["run","dev"])}catch(e){console.log(xt(e.message));return}}function yl(e){return or.find(t=>t.value===e)}function wl(e){if(!e)return;const t=e.split(" ")[0].split("/");return{name:t[0],version:t[1]}}function q(e,t,i=""){return new Promise((r,s)=>{const n=gr(e,t,{stdio:"inherit"});n.on("close",o=>{o!==0?s(new Error(`${e} exited with code ${o}`)):r()}),n.on("error",o=>{s(new Error(`Failed to ${i||"start process"}: ${o.message}`))})})}function zt(e){return console.log(xe(e))}async function gl(e){try{return(await ur.stat(e)).isDirectory()}catch(t){if(t.code==="ENOENT")return!1;throw t}}async function vl(e,t,i){switch(t){case"nuxt":return!0;case"astro":const r=I.join(e,"tsconfig.json");try{return(await nt.readJson(r)).extends!=="astro/tsconfigs/base"}catch(s){throw new Error(`Error reading tsconfig.json: ${s.message}`)}break;case"laravel":return!1;default:return i}}async function bl(e){const t=I.join(e,"tsconfig.json");try{const i=await nt.readJson(t);i.compilerOptions={jsx:"preserve"},await nt.writeJson(t,i,{spaces:2})}catch(i){throw new Error(`Error updating tsconfig.json: ${i.message}`)}}async function Sl(e,t){const i=I.join(e,"vueform.config.js"),r=I.join(e,"vueform.config.ts");let s;try{if(await nt.pathExists(i))s=i;else if(await nt.pathExists(r))s=r;else throw new Error(`No vueform.config.js or vueform.config.ts file found: ${err.message}`)}catch(n){throw new Error(`Error checking for config files: ${n.message}`)}try{let n=await nt.readFile(s,"utf8");n=n.replace(/YOUR_PUBLIC_KEY/g,t),await nt.writeFile(s,n,"utf8")}catch(n){throw new Error(`Error inserting Public Key to ${I.basename(s)}: ${n.message}`)}}async function $l(e,t){try{await nt.copy(e,t,{overwrite:!0})}catch(i){throw new Error(`Error copying files: ${i.message}`)}}async function El(){const e=["/usr/local/bin/composer","/usr/local/bin/composer.phar","/usr/bin/composer","/usr/bin/composer.phar","C:\\ProgramData\\ComposerSetup\\bin\\composer","C:\\ProgramData\\ComposerSetup\\bin\\composer.phar","C:\\Program Files\\Composer\\composer.phar","C:\\Program Files\\Composer\\composer"];let t="composer";try{return await cl("composer --version"),t}catch{t=""}if(e.forEach(i=>{nt.existsSync(i)&&(t=i)}),t.endsWith(".phar")&&(t=`php ${t}`),!t)throw console.error(xt(`
Composer not found. Please ensure Composer is installed and added to your PATH.`)),console.error(xt(`Visit https://getcomposer.org/download/ for installation instructions.
`)),new Error(xt("\u2716")+" Operation cancelled");return t}function Pl(){const e=process.version.replace("v",""),t=wr("npm -v").toString().trim();ar(e,rr)<0&&(console.error(`Error: Minimum Node.js version required is ${rr}. Your current version is ${e}. Please upgrade Node.js.`),process.exit(1)),ar(t,sr)<0&&(console.error(`Error: Minimum npm version required is ${sr}. Your current version is ${t}. Please upgrade npm.`),process.exit(1))}function ar(e,t){const i=e.split(".").map(Number),r=t.split(".").map(Number);for(let s=0;s<3;s++)if(i[s]!==r[s])return i[s]-r[s];return 0}pl();
