import dr from"readline";import fr from"events";import A from"path";import Fe,{promises as mr}from"fs";import pr from"constants";import yr from"stream";import wr,{promisify as gr}from"util";import vr from"assert";import{exec as br,execSync as Sr,spawn as $r}from"child_process";import{fileURLToPath as Er}from"url";var Qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Me={};const{FORCE_COLOR:Pr,NODE_DISABLE_COLORS:xr,TERM:Or}=process.env,P={enabled:!xr&&Or!=="dumb"&&Pr!=="0",reset:O(0,0),bold:O(1,22),dim:O(2,22),italic:O(3,23),underline:O(4,24),inverse:O(7,27),hidden:O(8,28),strikethrough:O(9,29),black:O(30,39),red:O(31,39),green:O(32,39),yellow:O(33,39),blue:O(34,39),magenta:O(35,39),cyan:O(36,39),white:O(37,39),gray:O(90,39),grey:O(90,39),bgBlack:O(40,49),bgRed:O(41,49),bgGreen:O(42,49),bgYellow:O(43,49),bgBlue:O(44,49),bgMagenta:O(45,49),bgCyan:O(46,49),bgWhite:O(47,49)};function ke(e,t){let i=0,r,s="",n="";for(;i<e.length;i++)r=e[i],s+=r.open,n+=r.close,t.includes(r.close)&&(t=t.replace(r.rgx,r.close+r.open));return s+t+n}function Tr(e,t){let i={has:e,keys:t};return i.reset=P.reset.bind(i),i.bold=P.bold.bind(i),i.dim=P.dim.bind(i),i.italic=P.italic.bind(i),i.underline=P.underline.bind(i),i.inverse=P.inverse.bind(i),i.hidden=P.hidden.bind(i),i.strikethrough=P.strikethrough.bind(i),i.black=P.black.bind(i),i.red=P.red.bind(i),i.green=P.green.bind(i),i.yellow=P.yellow.bind(i),i.blue=P.blue.bind(i),i.magenta=P.magenta.bind(i),i.cyan=P.cyan.bind(i),i.white=P.white.bind(i),i.gray=P.gray.bind(i),i.grey=P.grey.bind(i),i.bgBlack=P.bgBlack.bind(i),i.bgRed=P.bgRed.bind(i),i.bgGreen=P.bgGreen.bind(i),i.bgYellow=P.bgYellow.bind(i),i.bgBlue=P.bgBlue.bind(i),i.bgMagenta=P.bgMagenta.bind(i),i.bgCyan=P.bgCyan.bind(i),i.bgWhite=P.bgWhite.bind(i),i}function O(e,t){let i={open:`\x1B[${e}m`,close:`\x1B[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(r){return this!==void 0&&this.has!==void 0?(this.has.includes(e)||(this.has.push(e),this.keys.push(i)),r===void 0?this:P.enabled?ke(this.keys,r+""):r+""):r===void 0?Tr([e],[i]):P.enabled?ke([i],r+""):r+""}}var K=P,Cr=(e,t)=>{if(!(e.meta&&e.name!=="escape")){if(e.ctrl){if(e.name==="a")return"first";if(e.name==="c"||e.name==="d")return"abort";if(e.name==="e")return"last";if(e.name==="g")return"reset"}if(t){if(e.name==="j")return"down";if(e.name==="k")return"up"}return e.name==="return"||e.name==="enter"?"submit":e.name==="backspace"?"delete":e.name==="delete"?"deleteForward":e.name==="abort"?"abort":e.name==="escape"?"exit":e.name==="tab"?"next":e.name==="pagedown"?"nextPage":e.name==="pageup"?"prevPage":e.name==="home"?"home":e.name==="end"?"end":e.name==="up"?"up":e.name==="down"?"down":e.name==="right"?"right":e.name==="left"?"left":!1}},te=e=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),i=new RegExp(t,"g");return typeof e=="string"?e.replace(i,""):e};const ee="\x1B",F=`${ee}[`,Fr="\x07",ie={to(e,t){return t?`${F}${t+1};${e+1}H`:`${F}${e+1}G`},move(e,t){let i="";return e<0?i+=`${F}${-e}D`:e>0&&(i+=`${F}${e}C`),t<0?i+=`${F}${-t}A`:t>0&&(i+=`${F}${t}B`),i},up:(e=1)=>`${F}${e}A`,down:(e=1)=>`${F}${e}B`,forward:(e=1)=>`${F}${e}C`,backward:(e=1)=>`${F}${e}D`,nextLine:(e=1)=>`${F}E`.repeat(e),prevLine:(e=1)=>`${F}F`.repeat(e),left:`${F}G`,hide:`${F}?25l`,show:`${F}?25h`,save:`${ee}7`,restore:`${ee}8`},Mr={up:(e=1)=>`${F}S`.repeat(e),down:(e=1)=>`${F}T`.repeat(e)},kr={screen:`${F}2J`,up:(e=1)=>`${F}1J`.repeat(e),down:(e=1)=>`${F}J`.repeat(e),line:`${F}2K`,lineEnd:`${F}K`,lineStart:`${F}1K`,lines(e){let t="";for(let i=0;i<e;i++)t+=this.line+(i<e-1?ie.up():"");return e&&(t+=ie.left),t}};var G={cursor:ie,scroll:Mr,erase:kr,beep:Fr};const Dr=te,{erase:De,cursor:_r}=G,Ar=e=>[...Dr(e)].length;var Ir=function(e,t){if(!t)return De.line+_r.to(0);let i=0;const r=e.split(/\r?\n/);for(let s of r)i+=1+Math.floor(Math.max(Ar(s)-1,0)/t);return De.lines(i)};const Tt={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},Nr={arrowUp:Tt.arrowUp,arrowDown:Tt.arrowDown,arrowLeft:Tt.arrowLeft,arrowRight:Tt.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},Rr=process.platform==="win32"?Nr:Tt;var _e=Rr;const yt=K,dt=_e,re=Object.freeze({password:{scale:1,render:e=>"*".repeat(e.length)},emoji:{scale:2,render:e=>"\u{1F603}".repeat(e.length)},invisible:{scale:0,render:e=>""},default:{scale:1,render:e=>`${e}`}}),jr=e=>re[e]||re.default,Ct=Object.freeze({aborted:yt.red(dt.cross),done:yt.green(dt.tick),exited:yt.yellow(dt.cross),default:yt.cyan("?")}),Lr=(e,t,i)=>t?Ct.aborted:i?Ct.exited:e?Ct.done:Ct.default,Jr=e=>yt.gray(e?dt.ellipsis:dt.pointerSmall),Yr=(e,t)=>yt.gray(e?t?dt.pointerSmall:"+":dt.line);var Wr={styles:re,render:jr,symbols:Ct,symbol:Lr,delimiter:Jr,item:Yr};const Br=te;var Vr=function(e,t){let i=String(Br(e)||"").split(/\r?\n/);return t?i.map(r=>Math.ceil(r.length/t)).reduce((r,s)=>r+s):i.length},Hr=(e,t={})=>{const i=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",r=t.width;return(e||"").split(/\r?\n/g).map(s=>s.split(/\s+/g).reduce((n,o)=>(o.length+i.length>=r||n[n.length-1].length+o.length+1<r?n[n.length-1]+=` ${o}`:n.push(`${i}${o}`),n),[i]).join(`
`)).join(`
`)},Ur=(e,t,i)=>{i=i||t;let r=Math.min(t-i,e-Math.floor(i/2));r<0&&(r=0);let s=Math.min(r+i,t);return{startIndex:r,endIndex:s}},z={action:Cr,clear:Ir,style:Wr,strip:te,figures:_e,lines:Vr,wrap:Hr,entriesToDisplay:Ur};const Ae=dr,{action:Kr}=z,Gr=fr,{beep:qr,cursor:zr}=G,Zr=K;let Qr=class extends Gr{constructor(t={}){super(),this.firstRender=!0,this.in=t.stdin||process.stdin,this.out=t.stdout||process.stdout,this.onRender=(t.onRender||(()=>{})).bind(this);const i=Ae.createInterface({input:this.in,escapeCodeTimeout:50});Ae.emitKeypressEvents(this.in,i),this.in.isTTY&&this.in.setRawMode(!0);const r=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,s=(n,o)=>{let l=Kr(o,r);l===!1?this._&&this._(n,o):typeof this[l]=="function"?this[l](o):this.bell()};this.close=()=>{this.out.write(zr.show),this.in.removeListener("keypress",s),this.in.isTTY&&this.in.setRawMode(!1),i.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",s)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(qr)}render(){this.onRender(Zr),this.firstRender&&(this.firstRender=!1)}};var ot=Qr;const jt=K,Xr=ot,{erase:ts,cursor:Ft}=G,{style:se,clear:ne,lines:es,figures:is}=z;class rs extends Xr{constructor(t={}){super(t),this.transform=se.render(t.style),this.scale=this.transform.scale,this.msg=t.message,this.initial=t.initial||"",this.validator=t.validate||(()=>!0),this.value="",this.errorMsg=t.error||"Please Enter A Valid Value",this.cursor=+!!this.initial,this.cursorOffset=0,this.clear=ne("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=jt.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=+!!this.initial,this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(t){this.placeholder||(this.cursor=this.cursor+t,this.cursorOffset+=t)}_(t,i){let r=this.value.slice(0,this.cursor),s=this.value.slice(this.cursor);this.value=`${r}${t}${s}`,this.red=!1,this.cursor=this.placeholder?0:r.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let t=this.value.slice(0,this.cursor-1),i=this.value.slice(this.cursor);this.value=`${t}${i}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let t=this.value.slice(0,this.cursor),i=this.value.slice(this.cursor+1);this.value=`${t}${i}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(Ft.down(es(this.outputError,this.out.columns)-1)+ne(this.outputError,this.out.columns)),this.out.write(ne(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[se.symbol(this.done,this.aborted),jt.bold(this.msg),se.delimiter(this.done),this.red?jt.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,i,r)=>t+`
${r?" ":is.pointerSmall} ${jt.red().italic(i)}`,"")),this.out.write(ts.line+Ft.to(0)+this.outputText+Ft.save+this.outputError+Ft.restore+Ft.move(this.cursorOffset,0)))}}var ss=rs;const et=K,ns=ot,{style:Ie,clear:Ne,figures:Lt,wrap:os,entriesToDisplay:as}=z,{cursor:ls}=G;class cs extends ns{constructor(t={}){super(t),this.msg=t.message,this.hint=t.hint||"- Use arrow-keys. Return to submit.",this.warn=t.warn||"- This option is disabled",this.cursor=t.initial||0,this.choices=t.choices.map((i,r)=>(typeof i=="string"&&(i={title:i,value:r}),{title:i&&(i.title||i.value||i),value:i&&(i.value===void 0?r:i.value),description:i&&i.description,selected:i&&i.selected,disabled:i&&i.disabled})),this.optionsPerPage=t.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=Ne("",this.out.columns),this.render()}moveCursor(t){this.cursor=t,this.value=this.choices[t].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(t,i){if(t===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(ls.hide):this.out.write(Ne(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:i}=as(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[Ie.symbol(this.done,this.aborted),et.bold(this.msg),Ie.delimiter(!1),this.done?this.selection.title:this.selection.disabled?et.yellow(this.warn):et.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let r=t;r<i;r++){let s,n,o="",l=this.choices[r];r===t&&t>0?n=Lt.arrowUp:r===i-1&&i<this.choices.length?n=Lt.arrowDown:n=" ",l.disabled?(s=this.cursor===r?et.gray().underline(l.title):et.strikethrough().gray(l.title),n=(this.cursor===r?et.bold().gray(Lt.pointer)+" ":"  ")+n):(s=this.cursor===r?et.cyan().underline(l.title):l.title,n=(this.cursor===r?et.cyan(Lt.pointer)+" ":"  ")+n,l.description&&this.cursor===r&&(o=` - ${l.description}`,(n.length+s.length+o.length>=this.out.columns||l.description.split(/\r?\n/).length>1)&&(o=`
`+os(l.description,{margin:3,width:this.out.columns})))),this.outputText+=`${n} ${s}${et.gray(o)}
`}}this.out.write(this.outputText)}}var us=cs;const Jt=K,hs=ot,{style:Re,clear:ds}=z,{cursor:je,erase:fs}=G;class ms extends hs{constructor(t={}){super(t),this.msg=t.message,this.value=!!t.initial,this.active=t.active||"on",this.inactive=t.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(t,i){if(t===" ")this.value=!this.value;else if(t==="1")this.value=!0;else if(t==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(je.hide):this.out.write(ds(this.outputText,this.out.columns)),super.render(),this.outputText=[Re.symbol(this.done,this.aborted),Jt.bold(this.msg),Re.delimiter(this.done),this.value?this.inactive:Jt.cyan().underline(this.inactive),Jt.gray("/"),this.value?Jt.cyan().underline(this.active):this.active].join(" "),this.out.write(fs.line+je.to(0)+this.outputText))}}var ps=ms;let ys=class Ce{constructor({token:t,date:i,parts:r,locales:s}){this.token=t,this.date=i||new Date,this.parts=r||[this],this.locales=s||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find((i,r)=>r>t&&i instanceof Ce)}setTo(t){}prev(){let t=[].concat(this.parts).reverse();const i=t.indexOf(this);return t.find((r,s)=>s>i&&r instanceof Ce)}toString(){return String(this.date)}};var it=ys;const ws=it;let gs=class extends ws{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}};var vs=gs;const bs=it,Ss=e=>(e=e%10,e===1?"st":e===2?"nd":e===3?"rd":"th");let $s=class extends bs{constructor(t={}){super(t)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(t){this.date.setDate(parseInt(t.substr(-2)))}toString(){let t=this.date.getDate(),i=this.date.getDay();return this.token==="DD"?String(t).padStart(2,"0"):this.token==="Do"?t+Ss(t):this.token==="d"?i+1:this.token==="ddd"?this.locales.weekdaysShort[i]:this.token==="dddd"?this.locales.weekdays[i]:t}};var Es=$s;const Ps=it;let xs=class extends Ps{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}};var Os=xs;const Ts=it;let Cs=class extends Ts{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};var Fs=Cs;const Ms=it;let ks=class extends Ms{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}};var Ds=ks;const _s=it;let As=class extends _s{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),i=this.token.length;return i===2?String(t+1).padStart(2,"0"):i===3?this.locales.monthsShort[t]:i===4?this.locales.months[t]:String(t+1)}};var Is=As;const Ns=it;let Rs=class extends Ns{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}};var js=Rs;const Ls=it;let Js=class extends Ls{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}};var Ys=Js,Ws={DatePart:it,Meridiem:vs,Day:Es,Hours:Os,Milliseconds:Fs,Minutes:Ds,Month:Is,Seconds:js,Year:Ys};const oe=K,Bs=ot,{style:Le,clear:Je,figures:Vs}=z,{erase:Hs,cursor:Ye}=G,{DatePart:We,Meridiem:Us,Day:Ks,Hours:Gs,Milliseconds:qs,Minutes:zs,Month:Zs,Seconds:Qs,Year:Xs}=Ws,tn=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,Be={1:({token:e})=>e.replace(/\\(.)/g,"$1"),2:e=>new Ks(e),3:e=>new Zs(e),4:e=>new Xs(e),5:e=>new Us(e),6:e=>new Gs(e),7:e=>new zs(e),8:e=>new Qs(e),9:e=>new qs(e)},en={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class rn extends Bs{constructor(t={}){super(t),this.msg=t.message,this.cursor=0,this.typed="",this.locales=Object.assign(en,t.locales),this._date=t.initial||new Date,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.mask=t.mask||"YYYY-MM-DD HH:mm:ss",this.clear=Je("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(t){t&&this._date.setTime(t.getTime())}set mask(t){let i;for(this.parts=[];i=tn.exec(t);){let s=i.shift(),n=i.findIndex(o=>o!=null);this.parts.push(n in Be?Be[n]({token:i[n]||s,date:this.date,parts:this.parts,locales:this.locales}):i[n]||s)}let r=this.parts.reduce((s,n)=>(typeof n=="string"&&typeof s[s.length-1]=="string"?s[s.length-1]+=n:s.push(n),s),[]);this.parts.splice(0),this.parts.push(...r),this.reset()}moveCursor(t){this.typed="",this.cursor=t,this.fire()}reset(){this.moveCursor(this.parts.findIndex(t=>t instanceof We)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let t=this.parts[this.cursor].prev();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}right(){let t=this.parts[this.cursor].next();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}next(){let t=this.parts[this.cursor].next();this.moveCursor(t?this.parts.indexOf(t):this.parts.findIndex(i=>i instanceof We)),this.render()}_(t){/\d/.test(t)&&(this.typed+=t,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(Ye.hide):this.out.write(Je(this.outputText,this.out.columns)),super.render(),this.outputText=[Le.symbol(this.done,this.aborted),oe.bold(this.msg),Le.delimiter(!1),this.parts.reduce((t,i,r)=>t.concat(r===this.cursor&&!this.done?oe.cyan().underline(i.toString()):i),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((t,i,r)=>t+`
${r?" ":Vs.pointerSmall} ${oe.red().italic(i)}`,"")),this.out.write(Hs.line+Ye.to(0)+this.outputText))}}var sn=rn;const Yt=K,nn=ot,{cursor:Wt,erase:on}=G,{style:ae,figures:an,clear:Ve,lines:ln}=z,cn=/[0-9]/,le=e=>e!==void 0,He=(e,t)=>{let i=Math.pow(10,t);return Math.round(e*i)/i};class un extends nn{constructor(t={}){super(t),this.transform=ae.render(t.style),this.msg=t.message,this.initial=le(t.initial)?t.initial:"",this.float=!!t.float,this.round=t.round||2,this.inc=t.increment||1,this.min=le(t.min)?t.min:-1/0,this.max=le(t.max)?t.max:1/0,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){!t&&t!==0?(this.placeholder=!0,this.rendered=Yt.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${He(t,this.round)}`),this._value=He(t,this.round)),this.fire()}get value(){return this._value}parse(t){return this.float?parseFloat(t):parseInt(t)}valid(t){return t==="-"||t==="."&&this.float||cn.test(t)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let t=this.value;this.value=t!==""?t:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let t=this.value;this.value=t!==""?t:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let t=this.value.toString();if(t.length===0)return this.bell();this.value=this.parse(t=t.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(t,i){if(!this.valid(t))return this.bell();const r=Date.now();if(r-this.lastHit>1e3&&(this.typed=""),this.typed+=t,this.lastHit=r,this.color="cyan",t===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(Wt.down(ln(this.outputError,this.out.columns)-1)+Ve(this.outputError,this.out.columns)),this.out.write(Ve(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[ae.symbol(this.done,this.aborted),Yt.bold(this.msg),ae.delimiter(this.done),!this.done||!this.done&&!this.placeholder?Yt[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,i,r)=>t+`
${r?" ":an.pointerSmall} ${Yt.red().italic(i)}`,"")),this.out.write(on.line+Wt.to(0)+this.outputText+Wt.save+this.outputError+Wt.restore))}}var hn=un;const Z=K,{cursor:dn}=G,fn=ot,{clear:Ue,figures:at,style:Ke,wrap:mn,entriesToDisplay:pn}=z;let yn=class extends fn{constructor(t={}){super(t),this.msg=t.message,this.cursor=t.cursor||0,this.scrollIndex=t.cursor||0,this.hint=t.hint||"",this.warn=t.warn||"- This option is disabled -",this.minSelected=t.min,this.showMinError=!1,this.maxChoices=t.max,this.instructions=t.instructions,this.optionsPerPage=t.optionsPerPage||10,this.value=t.choices.map((i,r)=>(typeof i=="string"&&(i={title:i,value:r}),{title:i&&(i.title||i.value||i),description:i&&i.description,value:i&&(i.value===void 0?r:i.value),selected:i&&i.selected,disabled:i&&i.disabled})),this.clear=Ue("",this.out.columns),t.overrideRender||this.render()}reset(){this.value.map(t=>!t.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(t=>t.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const t=this.value.filter(i=>i.selected);this.minSelected&&t.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const t=this.value[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const t=!this.value[this.cursor].selected;this.value.filter(i=>!i.disabled).forEach(i=>i.selected=t),this.render()}_(t,i){if(t===" ")this.handleSpaceToggle();else if(t==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${at.arrowUp}/${at.arrowDown}: Highlight option
    ${at.arrowLeft}/${at.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(t,i,r,s){const n=(i.selected?Z.green(at.radioOn):at.radioOff)+" "+s+" ";let o,l;return i.disabled?o=t===r?Z.gray().underline(i.title):Z.strikethrough().gray(i.title):(o=t===r?Z.cyan().underline(i.title):i.title,t===r&&i.description&&(l=` - ${i.description}`,(n.length+o.length+l.length>=this.out.columns||i.description.split(/\r?\n/).length>1)&&(l=`
`+mn(i.description,{margin:n.length,width:this.out.columns})))),n+o+Z.gray(l||"")}paginateOptions(t){if(t.length===0)return Z.red("No matches for this query.");let{startIndex:i,endIndex:r}=pn(this.cursor,t.length,this.optionsPerPage),s,n=[];for(let o=i;o<r;o++)o===i&&i>0?s=at.arrowUp:o===r-1&&r<t.length?s=at.arrowDown:s=" ",n.push(this.renderOption(this.cursor,t[o],o,s));return`
`+n.join(`
`)}renderOptions(t){return this.done?"":this.paginateOptions(t)}renderDoneOrInstructions(){if(this.done)return this.value.filter(i=>i.selected).map(i=>i.title).join(", ");const t=[Z.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(Z.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(dn.hide),super.render();let t=[Ke.symbol(this.done,this.aborted),Z.bold(this.msg),Ke.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=Z.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.value),this.out.write(this.clear+t),this.clear=Ue(t,this.out.columns)}};var Ge=yn;const Mt=K,wn=ot,{erase:gn,cursor:qe}=G,{style:ce,clear:ze,figures:ue,wrap:vn,entriesToDisplay:bn}=z,Ze=(e,t)=>e[t]&&(e[t].value||e[t].title||e[t]),Sn=(e,t)=>e[t]&&(e[t].title||e[t].value||e[t]),$n=(e,t)=>{const i=e.findIndex(r=>r.value===t||r.title===t);return i>-1?i:void 0};class En extends wn{constructor(t={}){super(t),this.msg=t.message,this.suggest=t.suggest,this.choices=t.choices,this.initial=typeof t.initial=="number"?t.initial:$n(t.choices,t.initial),this.select=this.initial||t.cursor||0,this.i18n={noMatches:t.noMatches||"no matches found"},this.fallback=t.fallback||this.initial,this.clearFirst=t.clearFirst||!1,this.suggestions=[],this.input="",this.limit=t.limit||10,this.cursor=0,this.transform=ce.render(t.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=ze("",this.out.columns),this.complete(this.render),this.render()}set fallback(t){this._fb=Number.isSafeInteger(parseInt(t))?parseInt(t):t}get fallback(){let t;return typeof this._fb=="number"?t=this.choices[this._fb]:typeof this._fb=="string"&&(t={title:this._fb}),t||this._fb||{title:this.i18n.noMatches}}moveSelect(t){this.select=t,this.suggestions.length>0?this.value=Ze(this.suggestions,t):this.value=this.fallback.value,this.fire()}async complete(t){const i=this.completing=this.suggest(this.input,this.choices),r=await i;if(this.completing!==i)return;this.suggestions=r.map((n,o,l)=>({title:Sn(l,o),value:Ze(l,o),description:n.description})),this.completing=!1;const s=Math.max(r.length-1,0);this.moveSelect(Math.min(s,this.select)),t&&t()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,i){let r=this.input.slice(0,this.cursor),s=this.input.slice(this.cursor);this.input=`${r}${t}${s}`,this.cursor=r.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let t=this.input.slice(0,this.cursor-1),i=this.input.slice(this.cursor);this.input=`${t}${i}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let t=this.input.slice(0,this.cursor),i=this.input.slice(this.cursor+1);this.input=`${t}${i}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,i,r,s){let n,o=r?ue.arrowUp:s?ue.arrowDown:" ",l=i?Mt.cyan().underline(t.title):t.title;return o=(i?Mt.cyan(ue.pointer)+" ":"  ")+o,t.description&&(n=` - ${t.description}`,(o.length+l.length+n.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(n=`
`+vn(t.description,{margin:3,width:this.out.columns}))),o+" "+l+Mt.gray(n||"")}render(){if(this.closed)return;this.firstRender?this.out.write(qe.hide):this.out.write(ze(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:i}=bn(this.select,this.choices.length,this.limit);if(this.outputText=[ce.symbol(this.done,this.aborted,this.exited),Mt.bold(this.msg),ce.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const r=this.suggestions.slice(t,i).map((s,n)=>this.renderOption(s,this.select===n+t,n===0&&t>0,n+t===i-1&&i<this.choices.length)).join(`
`);this.outputText+=`
`+(r||Mt.gray(this.fallback.title))}this.out.write(gn.line+qe.to(0)+this.outputText)}}var Pn=En;const rt=K,{cursor:xn}=G,On=Ge,{clear:Qe,style:Xe,figures:wt}=z;class Tn extends On{constructor(t={}){t.overrideRender=!0,super(t),this.inputValue="",this.clear=Qe("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const t=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(r=>this.inputValue?!!(typeof r.title=="string"&&r.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof r.value=="string"&&r.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const i=this.filteredOptions.findIndex(r=>r===t);this.cursor=i<0?0:i,this.render()}handleSpaceToggle(){const t=this.filteredOptions[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}handleInputChange(t){this.inputValue=this.inputValue+t,this.updateFilteredOptions()}_(t,i){t===" "?this.handleSpaceToggle():this.handleInputChange(t)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${wt.arrowUp}/${wt.arrowDown}: Highlight option
    ${wt.arrowLeft}/${wt.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:rt.gray("Enter something to filter")}
`}renderOption(t,i,r){let s;return i.disabled?s=t===r?rt.gray().underline(i.title):rt.strikethrough().gray(i.title):s=t===r?rt.cyan().underline(i.title):i.title,(i.selected?rt.green(wt.radioOn):wt.radioOff)+"  "+s}renderDoneOrInstructions(){if(this.done)return this.value.filter(i=>i.selected).map(i=>i.title).join(", ");const t=[rt.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(rt.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(xn.hide),super.render();let t=[Xe.symbol(this.done,this.aborted),rt.bold(this.msg),Xe.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=rt.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+t),this.clear=Qe(t,this.out.columns)}}var Cn=Tn;const ti=K,Fn=ot,{style:ei,clear:Mn}=z,{erase:kn,cursor:ii}=G;class Dn extends Fn{constructor(t={}){super(t),this.msg=t.message,this.value=t.initial,this.initialValue=!!t.initial,this.yesMsg=t.yes||"yes",this.yesOption=t.yesOption||"(Y/n)",this.noMsg=t.no||"no",this.noOption=t.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,i){return t.toLowerCase()==="y"?(this.value=!0,this.submit()):t.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(ii.hide):this.out.write(Mn(this.outputText,this.out.columns)),super.render(),this.outputText=[ei.symbol(this.done,this.aborted),ti.bold(this.msg),ei.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:ti.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(kn.line+ii.to(0)+this.outputText))}}var _n=Dn,An={TextPrompt:ss,SelectPrompt:us,TogglePrompt:ps,DatePrompt:sn,NumberPrompt:hn,MultiselectPrompt:Ge,AutocompletePrompt:Pn,AutocompleteMultiselectPrompt:Cn,ConfirmPrompt:_n};(function(e){const t=e,i=An,r=o=>o;function s(o,l,p={}){return new Promise((d,a)=>{const h=new i[o](l),c=p.onAbort||r,u=p.onSubmit||r,f=p.onExit||r;h.on("state",l.onState||r),h.on("submit",b=>d(u(b))),h.on("exit",b=>d(f(b))),h.on("abort",b=>a(c(b)))})}t.text=o=>s("TextPrompt",o),t.password=o=>(o.style="password",t.text(o)),t.invisible=o=>(o.style="invisible",t.text(o)),t.number=o=>s("NumberPrompt",o),t.date=o=>s("DatePrompt",o),t.confirm=o=>s("ConfirmPrompt",o),t.list=o=>{const l=o.separator||",";return s("TextPrompt",o,{onSubmit:p=>p.split(l).map(d=>d.trim())})},t.toggle=o=>s("TogglePrompt",o),t.select=o=>s("SelectPrompt",o),t.multiselect=o=>{o.choices=[].concat(o.choices||[]);const l=p=>p.filter(d=>d.selected).map(d=>d.value);return s("MultiselectPrompt",o,{onAbort:l,onSubmit:l})},t.autocompleteMultiselect=o=>{o.choices=[].concat(o.choices||[]);const l=p=>p.filter(d=>d.selected).map(d=>d.value);return s("AutocompleteMultiselectPrompt",o,{onAbort:l,onSubmit:l})};const n=(o,l)=>Promise.resolve(l.filter(p=>p.title.slice(0,o.length).toLowerCase()===o.toLowerCase()));t.autocomplete=o=>(o.suggest=o.suggest||n,o.choices=[].concat(o.choices||[]),s("AutocompletePrompt",o))})(Me);const he=Me,In=["suggest","format","onState","validate","onRender","type"],ri=()=>{};async function lt(e=[],{onSubmit:t=ri,onCancel:i=ri}={}){const r={},s=lt._override||{};e=[].concat(e);let n,o,l,p,d,a;const h=async(c,u,f=!1)=>{if(!(!f&&c.validate&&c.validate(u)!==!0))return c.format?await c.format(u,r):u};for(o of e)if({name:p,type:d}=o,typeof d=="function"&&(d=await d(n,{...r},o),o.type=d),!!d){for(let c in o){if(In.includes(c))continue;let u=o[c];o[c]=typeof u=="function"?await u(n,{...r},a):u}if(a=o,typeof o.message!="string")throw new Error("prompt message is required");if({name:p,type:d}=o,he[d]===void 0)throw new Error(`prompt type (${d}) is not defined`);if(s[o.name]!==void 0&&(n=await h(o,s[o.name]),n!==void 0)){r[p]=n;continue}try{n=lt._injected?Nn(lt._injected,o.initial):await he[d](o),r[p]=n=await h(o,n,!0),l=await t(o,n,r)}catch{l=!await i(o,r)}if(l)return r}return r}function Nn(e,t){const i=e.shift();if(i instanceof Error)throw i;return i===void 0?t:i}function Rn(e){lt._injected=(lt._injected||[]).concat(e)}function jn(e){lt._override=Object.assign({},e)}var Ln=Object.assign(lt,{prompt:lt,prompts:he,inject:Rn,override:jn});const si=Xt(Ln);function Jn(e,t){var i=e;t.slice(0,-1).forEach(function(s){i=i[s]||{}});var r=t[t.length-1];return r in i}function ni(e){return typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function oi(e,t){return t==="constructor"&&typeof e[t]=="function"||t==="__proto__"}var Yn=function(e,t){t||(t={});var i={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(i.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?i.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(g){i.bools[g]=!0});var r={};function s(g){return r[g].some(function(D){return i.bools[D]})}Object.keys(t.alias||{}).forEach(function(g){r[g]=[].concat(t.alias[g]),r[g].forEach(function(D){r[D]=[g].concat(r[g].filter(function(U){return D!==U}))})}),[].concat(t.string).filter(Boolean).forEach(function(g){i.strings[g]=!0,r[g]&&[].concat(r[g]).forEach(function(D){i.strings[D]=!0})});var n=t.default||{},o={_:[]};function l(g,D){return i.allBools&&/^--[^=]+$/.test(D)||i.strings[g]||i.bools[g]||r[g]}function p(g,D,U){for(var E=g,tt=0;tt<D.length-1;tt++){var m=D[tt];if(oi(E,m))return;E[m]===void 0&&(E[m]={}),(E[m]===Object.prototype||E[m]===Number.prototype||E[m]===String.prototype)&&(E[m]={}),E[m]===Array.prototype&&(E[m]=[]),E=E[m]}var v=D[D.length-1];oi(E,v)||((E===Object.prototype||E===Number.prototype||E===String.prototype)&&(E={}),E===Array.prototype&&(E=[]),E[v]===void 0||i.bools[v]||typeof E[v]=="boolean"?E[v]=U:Array.isArray(E[v])?E[v].push(U):E[v]=[E[v],U])}function d(g,D,U){if(!(U&&i.unknownFn&&!l(g,U)&&i.unknownFn(U)===!1)){var E=!i.strings[g]&&ni(D)?Number(D):D;p(o,g.split("."),E),(r[g]||[]).forEach(function(tt){p(o,tt.split("."),E)})}}Object.keys(i.bools).forEach(function(g){d(g,n[g]===void 0?!1:n[g])});var a=[];e.indexOf("--")!==-1&&(a=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var h=0;h<e.length;h++){var c=e[h],u,f;if(/^--.+=/.test(c)){var b=c.match(/^--([^=]+)=([\s\S]*)$/);u=b[1];var y=b[2];i.bools[u]&&(y=y!=="false"),d(u,y,c)}else if(/^--no-.+/.test(c))u=c.match(/^--no-(.+)/)[1],d(u,!1,c);else if(/^--.+/.test(c))u=c.match(/^--(.+)/)[1],f=e[h+1],f!==void 0&&!/^(-|--)[^-]/.test(f)&&!i.bools[u]&&!i.allBools&&(!r[u]||!s(u))?(d(u,f,c),h+=1):/^(true|false)$/.test(f)?(d(u,f==="true",c),h+=1):d(u,i.strings[u]?"":!0,c);else if(/^-[^-]+/.test(c)){for(var w=c.slice(1,-1).split(""),k=!1,S=0;S<w.length;S++){if(f=c.slice(S+2),f==="-"){d(w[S],f,c);continue}if(/[A-Za-z]/.test(w[S])&&f[0]==="="){d(w[S],f.slice(1),c),k=!0;break}if(/[A-Za-z]/.test(w[S])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){d(w[S],f,c),k=!0;break}if(w[S+1]&&w[S+1].match(/\W/)){d(w[S],c.slice(S+2),c),k=!0;break}else d(w[S],i.strings[w[S]]?"":!0,c)}u=c.slice(-1)[0],!k&&u!=="-"&&(e[h+1]&&!/^(-|--)[^-]/.test(e[h+1])&&!i.bools[u]&&(!r[u]||!s(u))?(d(u,e[h+1],c),h+=1):e[h+1]&&/^(true|false)$/.test(e[h+1])?(d(u,e[h+1]==="true",c),h+=1):d(u,i.strings[u]?"":!0,c))}else if((!i.unknownFn||i.unknownFn(c)!==!1)&&o._.push(i.strings._||!ni(c)?c:Number(c)),t.stopEarly){o._.push.apply(o._,e.slice(h+1));break}}return Object.keys(n).forEach(function(g){Jn(o,g.split("."))||(p(o,g.split("."),n[g]),(r[g]||[]).forEach(function(D){p(o,D.split("."),n[g])}))}),t["--"]?o["--"]=a.slice():a.forEach(function(g){o._.push(g)}),o};const Wn=Xt(Yn);var B={},I={};I.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((i,r)=>{t.push((s,n)=>s!=null?r(s):i(n)),e.apply(this,t)})},"name",{value:e.name})},I.fromPromise=function(e){return Object.defineProperty(function(...t){const i=t[t.length-1];if(typeof i!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(r=>i(null,r),i)},"name",{value:e.name})};var ct=pr,Bn=process.cwd,Bt=null,Vn=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Bt||(Bt=Bn.call(process)),Bt};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var ai=process.chdir;process.chdir=function(e){Bt=null,ai.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ai)}var Hn=Un;function Un(e){ct.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||i(e),e.chown=n(e.chown),e.fchown=n(e.fchown),e.lchown=n(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=s(e.chmodSync),e.fchmodSync=s(e.fchmodSync),e.lchmodSync=s(e.lchmodSync),e.stat=l(e.stat),e.fstat=l(e.fstat),e.lstat=l(e.lstat),e.statSync=p(e.statSync),e.fstatSync=p(e.fstatSync),e.lstatSync=p(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(a,h,c){c&&process.nextTick(c)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(a,h,c,u){u&&process.nextTick(u)},e.lchownSync=function(){}),Vn==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(a){function h(c,u,f){var b=Date.now(),y=0;a(c,u,function w(k){if(k&&(k.code==="EACCES"||k.code==="EPERM"||k.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){e.stat(u,function(S,g){S&&S.code==="ENOENT"?a(c,u,w):f(k)})},y),y<100&&(y+=10);return}f&&f(k)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,a),h}(e.rename)),e.read=typeof e.read!="function"?e.read:function(a){function h(c,u,f,b,y,w){var k;if(w&&typeof w=="function"){var S=0;k=function(g,D,U){if(g&&g.code==="EAGAIN"&&S<10)return S++,a.call(e,c,u,f,b,y,k);w.apply(this,arguments)}}return a.call(e,c,u,f,b,y,k)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,a),h}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(a){return function(h,c,u,f,b){for(var y=0;;)try{return a.call(e,h,c,u,f,b)}catch(w){if(w.code==="EAGAIN"&&y<10){y++;continue}throw w}}}(e.readSync);function t(a){a.lchmod=function(h,c,u){a.open(h,ct.O_WRONLY|ct.O_SYMLINK,c,function(f,b){if(f){u&&u(f);return}a.fchmod(b,c,function(y){a.close(b,function(w){u&&u(y||w)})})})},a.lchmodSync=function(h,c){var u=a.openSync(h,ct.O_WRONLY|ct.O_SYMLINK,c),f=!0,b;try{b=a.fchmodSync(u,c),f=!1}finally{if(f)try{a.closeSync(u)}catch{}else a.closeSync(u)}return b}}function i(a){ct.hasOwnProperty("O_SYMLINK")&&a.futimes?(a.lutimes=function(h,c,u,f){a.open(h,ct.O_SYMLINK,function(b,y){if(b){f&&f(b);return}a.futimes(y,c,u,function(w){a.close(y,function(k){f&&f(w||k)})})})},a.lutimesSync=function(h,c,u){var f=a.openSync(h,ct.O_SYMLINK),b,y=!0;try{b=a.futimesSync(f,c,u),y=!1}finally{if(y)try{a.closeSync(f)}catch{}else a.closeSync(f)}return b}):a.futimes&&(a.lutimes=function(h,c,u,f){f&&process.nextTick(f)},a.lutimesSync=function(){})}function r(a){return a&&function(h,c,u){return a.call(e,h,c,function(f){d(f)&&(f=null),u&&u.apply(this,arguments)})}}function s(a){return a&&function(h,c){try{return a.call(e,h,c)}catch(u){if(!d(u))throw u}}}function n(a){return a&&function(h,c,u,f){return a.call(e,h,c,u,function(b){d(b)&&(b=null),f&&f.apply(this,arguments)})}}function o(a){return a&&function(h,c,u){try{return a.call(e,h,c,u)}catch(f){if(!d(f))throw f}}}function l(a){return a&&function(h,c,u){typeof c=="function"&&(u=c,c=null);function f(b,y){y&&(y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296)),u&&u.apply(this,arguments)}return c?a.call(e,h,c,f):a.call(e,h,f)}}function p(a){return a&&function(h,c){var u=c?a.call(e,h,c):a.call(e,h);return u&&(u.uid<0&&(u.uid+=4294967296),u.gid<0&&(u.gid+=4294967296)),u}}function d(a){if(!a||a.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(a.code==="EINVAL"||a.code==="EPERM"))}}var li=yr.Stream,Kn=Gn;function Gn(e){return{ReadStream:t,WriteStream:i};function t(r,s){if(!(this instanceof t))return new t(r,s);li.call(this);var n=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var o=Object.keys(s),l=0,p=o.length;l<p;l++){var d=o[l];this[d]=s[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}e.open(this.path,this.flags,this.mode,function(a,h){if(a){n.emit("error",a),n.readable=!1;return}n.fd=h,n.emit("open",h),n._read()})}function i(r,s){if(!(this instanceof i))return new i(r,s);li.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var n=Object.keys(s),o=0,l=n.length;o<l;o++){var p=n[o];this[p]=s[p]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var qn=Zn,zn=Object.getPrototypeOf||function(e){return e.__proto__};function Zn(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:zn(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}),t}var M=Fe,Qn=Hn,Xn=Kn,to=qn,Vt=wr,Y,Ht;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Y=Symbol.for("graceful-fs.queue"),Ht=Symbol.for("graceful-fs.previous")):(Y="___graceful-fs.queue",Ht="___graceful-fs.previous");function eo(){}function ci(e,t){Object.defineProperty(e,Y,{get:function(){return t}})}var ft=eo;if(Vt.debuglog?ft=Vt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ft=function(){var e=Vt.format.apply(Vt,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)}),!M[Y]){var io=Qt[Y]||[];ci(M,io),M.close=function(e){function t(i,r){return e.call(M,i,function(s){s||ui(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,Ht,{value:e}),t}(M.close),M.closeSync=function(e){function t(i){e.apply(M,arguments),ui()}return Object.defineProperty(t,Ht,{value:e}),t}(M.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ft(M[Y]),vr.equal(M[Y].length,0)})}Qt[Y]||ci(Qt,M[Y]);var gt=de(to(M));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!M.__patched&&(gt=de(M),M.__patched=!0);function de(e){Qn(e),e.gracefulify=de,e.createReadStream=D,e.createWriteStream=U;var t=e.readFile;e.readFile=i;function i(m,v,$){return typeof v=="function"&&($=v,v=null),j(m,v,$);function j(L,N,C,_){return t(L,N,function(x){x&&(x.code==="EMFILE"||x.code==="ENFILE")?vt([j,[L,N,C],x,_||Date.now(),Date.now()]):typeof C=="function"&&C.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=s;function s(m,v,$,j){return typeof $=="function"&&(j=$,$=null),L(m,v,$,j);function L(N,C,_,x,J){return r(N,C,_,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?vt([L,[N,C,_,x],T,J||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var n=e.appendFile;n&&(e.appendFile=o);function o(m,v,$,j){return typeof $=="function"&&(j=$,$=null),L(m,v,$,j);function L(N,C,_,x,J){return n(N,C,_,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?vt([L,[N,C,_,x],T,J||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var l=e.copyFile;l&&(e.copyFile=p);function p(m,v,$,j){return typeof $=="function"&&(j=$,$=0),L(m,v,$,j);function L(N,C,_,x,J){return l(N,C,_,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?vt([L,[N,C,_,x],T,J||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var d=e.readdir;e.readdir=h;var a=/^v[0-5]\./;function h(m,v,$){typeof v=="function"&&($=v,v=null);var j=a.test(process.version)?function(C,_,x,J){return d(C,L(C,_,x,J))}:function(C,_,x,J){return d(C,_,L(C,_,x,J))};return j(m,v,$);function L(N,C,_,x){return function(J,T){J&&(J.code==="EMFILE"||J.code==="ENFILE")?vt([j,[N,C,_],J,x||Date.now(),Date.now()]):(T&&T.sort&&T.sort(),typeof _=="function"&&_.call(this,J,T))}}}if(process.version.substr(0,4)==="v0.8"){var c=Xn(e);w=c.ReadStream,S=c.WriteStream}var u=e.ReadStream;u&&(w.prototype=Object.create(u.prototype),w.prototype.open=k);var f=e.WriteStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=g),Object.defineProperty(e,"ReadStream",{get:function(){return w},set:function(m){w=m},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(m){S=m},enumerable:!0,configurable:!0});var b=w;Object.defineProperty(e,"FileReadStream",{get:function(){return b},set:function(m){b=m},enumerable:!0,configurable:!0});var y=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return y},set:function(m){y=m},enumerable:!0,configurable:!0});function w(m,v){return this instanceof w?(u.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function k(){var m=this;tt(m.path,m.flags,m.mode,function(v,$){v?(m.autoClose&&m.destroy(),m.emit("error",v)):(m.fd=$,m.emit("open",$),m.read())})}function S(m,v){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function g(){var m=this;tt(m.path,m.flags,m.mode,function(v,$){v?(m.destroy(),m.emit("error",v)):(m.fd=$,m.emit("open",$))})}function D(m,v){return new e.ReadStream(m,v)}function U(m,v){return new e.WriteStream(m,v)}var E=e.open;e.open=tt;function tt(m,v,$,j){return typeof $=="function"&&(j=$,$=null),L(m,v,$,j);function L(N,C,_,x,J){return E(N,C,_,function(T,Tl){T&&(T.code==="EMFILE"||T.code==="ENFILE")?vt([L,[N,C,_,x],T,J||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}return e}function vt(e){ft("ENQUEUE",e[0].name,e[1]),M[Y].push(e),fe()}var Ut;function ui(){for(var e=Date.now(),t=0;t<M[Y].length;++t)M[Y][t].length>2&&(M[Y][t][3]=e,M[Y][t][4]=e);fe()}function fe(){if(clearTimeout(Ut),Ut=void 0,M[Y].length!==0){var e=M[Y].shift(),t=e[0],i=e[1],r=e[2],s=e[3],n=e[4];if(s===void 0)ft("RETRY",t.name,i),t.apply(null,i);else if(Date.now()-s>=6e4){ft("TIMEOUT",t.name,i);var o=i.pop();typeof o=="function"&&o.call(null,r)}else{var l=Date.now()-n,p=Math.max(n-s,1),d=Math.min(p*1.2,100);l>=d?(ft("RETRY",t.name,i),t.apply(null,i.concat([s]))):M[Y].push(e)}Ut===void 0&&(Ut=setTimeout(fe,0))}}(function(e){const t=I.fromCallback,i=gt,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof i[s]=="function");Object.assign(e,i),r.forEach(s=>{e[s]=t(i[s])}),e.exists=function(s,n){return typeof n=="function"?i.exists(s,n):new Promise(o=>i.exists(s,o))},e.read=function(s,n,o,l,p,d){return typeof d=="function"?i.read(s,n,o,l,p,d):new Promise((a,h)=>{i.read(s,n,o,l,p,(c,u,f)=>{if(c)return h(c);a({bytesRead:u,buffer:f})})})},e.write=function(s,n,...o){return typeof o[o.length-1]=="function"?i.write(s,n,...o):new Promise((l,p)=>{i.write(s,n,...o,(d,a,h)=>{if(d)return p(d);l({bytesWritten:a,buffer:h})})})},e.readv=function(s,n,...o){return typeof o[o.length-1]=="function"?i.readv(s,n,...o):new Promise((l,p)=>{i.readv(s,n,...o,(d,a,h)=>{if(d)return p(d);l({bytesRead:a,buffers:h})})})},e.writev=function(s,n,...o){return typeof o[o.length-1]=="function"?i.writev(s,n,...o):new Promise((l,p)=>{i.writev(s,n,...o,(d,a,h)=>{if(d)return p(d);l({bytesWritten:a,buffers:h})})})},typeof i.realpath.native=="function"?e.realpath.native=t(i.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(B);var me={},hi={};const ro=A;hi.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(ro.parse(t).root,""))){const r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}};const di=B,{checkPath:fi}=hi,mi=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};me.makeDir=async(e,t)=>(fi(e),di.mkdir(e,{mode:mi(t),recursive:!0})),me.makeDirSync=(e,t)=>(fi(e),di.mkdirSync(e,{mode:mi(t),recursive:!0}));const so=I.fromPromise,{makeDir:no,makeDirSync:pe}=me,ye=so(no);var Q={mkdirs:ye,mkdirsSync:pe,mkdirp:ye,mkdirpSync:pe,ensureDir:ye,ensureDirSync:pe};const oo=I.fromPromise,pi=B;function ao(e){return pi.access(e).then(()=>!0).catch(()=>!1)}var mt={pathExists:oo(ao),pathExistsSync:pi.existsSync};const bt=B,lo=I.fromPromise;async function co(e,t,i){const r=await bt.open(e,"r+");let s=null;try{await bt.futimes(r,t,i)}finally{try{await bt.close(r)}catch(n){s=n}}if(s)throw s}function uo(e,t,i){const r=bt.openSync(e,"r+");return bt.futimesSync(r,t,i),bt.closeSync(r)}var yi={utimesMillis:lo(co),utimesMillisSync:uo};const St=B,R=A,wi=I.fromPromise;function ho(e,t,i){const r=i.dereference?s=>St.stat(s,{bigint:!0}):s=>St.lstat(s,{bigint:!0});return Promise.all([r(e),r(t).catch(s=>{if(s.code==="ENOENT")return null;throw s})]).then(([s,n])=>({srcStat:s,destStat:n}))}function fo(e,t,i){let r;const s=i.dereference?o=>St.statSync(o,{bigint:!0}):o=>St.lstatSync(o,{bigint:!0}),n=s(e);try{r=s(t)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:r}}async function mo(e,t,i,r){const{srcStat:s,destStat:n}=await ho(e,t,r);if(n){if(kt(s,n)){const o=R.basename(e),l=R.basename(t);if(i==="move"&&o!==l&&o.toLowerCase()===l.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(s.isDirectory()&&we(e,t))throw new Error(Kt(e,t,i));return{srcStat:s,destStat:n}}function po(e,t,i,r){const{srcStat:s,destStat:n}=fo(e,t,r);if(n){if(kt(s,n)){const o=R.basename(e),l=R.basename(t);if(i==="move"&&o!==l&&o.toLowerCase()===l.toLowerCase())return{srcStat:s,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(s.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!s.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(s.isDirectory()&&we(e,t))throw new Error(Kt(e,t,i));return{srcStat:s,destStat:n}}async function gi(e,t,i,r){const s=R.resolve(R.dirname(e)),n=R.resolve(R.dirname(i));if(n===s||n===R.parse(n).root)return;let o;try{o=await St.stat(n,{bigint:!0})}catch(l){if(l.code==="ENOENT")return;throw l}if(kt(t,o))throw new Error(Kt(e,i,r));return gi(e,t,n,r)}function vi(e,t,i,r){const s=R.resolve(R.dirname(e)),n=R.resolve(R.dirname(i));if(n===s||n===R.parse(n).root)return;let o;try{o=St.statSync(n,{bigint:!0})}catch(l){if(l.code==="ENOENT")return;throw l}if(kt(t,o))throw new Error(Kt(e,i,r));return vi(e,t,n,r)}function kt(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function we(e,t){const i=R.resolve(e).split(R.sep).filter(s=>s),r=R.resolve(t).split(R.sep).filter(s=>s);return i.every((s,n)=>r[n]===s)}function Kt(e,t,i){return`Cannot ${i} '${e}' to a subdirectory of itself, '${t}'.`}var $t={checkPaths:wi(mo),checkPathsSync:po,checkParentPaths:wi(gi),checkParentPathsSync:vi,isSrcSubdir:we,areIdentical:kt};const W=B,Dt=A,{mkdirs:yo}=Q,{pathExists:wo}=mt,{utimesMillis:go}=yi,_t=$t;async function vo(e,t,i={}){typeof i=="function"&&(i={filter:i}),i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:r,destStat:s}=await _t.checkPaths(e,t,"copy",i);if(await _t.checkParentPaths(e,r,t,"copy"),!await bi(e,t,i))return;const o=Dt.dirname(t);await wo(o)||await yo(o),await Si(s,e,t,i)}async function bi(e,t,i){return i.filter?i.filter(e,t):!0}async function Si(e,t,i,r){const n=await(r.dereference?W.stat:W.lstat)(t);if(n.isDirectory())return Eo(n,e,t,i,r);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return bo(n,e,t,i,r);if(n.isSymbolicLink())return Po(e,t,i,r);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function bo(e,t,i,r,s){if(!t)return $i(e,i,r,s);if(s.overwrite)return await W.unlink(r),$i(e,i,r,s);if(s.errorOnExist)throw new Error(`'${r}' already exists`)}async function $i(e,t,i,r){if(await W.copyFile(t,i),r.preserveTimestamps){So(e.mode)&&await $o(i,e.mode);const s=await W.stat(t);await go(i,s.atime,s.mtime)}return W.chmod(i,e.mode)}function So(e){return(e&128)===0}function $o(e,t){return W.chmod(e,t|128)}async function Eo(e,t,i,r,s){t||await W.mkdir(r);const n=await W.readdir(i);await Promise.all(n.map(async o=>{const l=Dt.join(i,o),p=Dt.join(r,o);if(!await bi(l,p,s))return;const{destStat:a}=await _t.checkPaths(l,p,"copy",s);return Si(a,l,p,s)})),t||await W.chmod(r,e.mode)}async function Po(e,t,i,r){let s=await W.readlink(t);if(r.dereference&&(s=Dt.resolve(process.cwd(),s)),!e)return W.symlink(s,i);let n=null;try{n=await W.readlink(i)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return W.symlink(s,i);throw o}if(r.dereference&&(n=Dt.resolve(process.cwd(),n)),_t.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(_t.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return await W.unlink(i),W.symlink(s,i)}var xo=vo;const V=gt,At=A,Oo=Q.mkdirsSync,To=yi.utimesMillisSync,It=$t;function Co(e,t,i){typeof i=="function"&&(i={filter:i}),i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:r,destStat:s}=It.checkPathsSync(e,t,"copy",i);if(It.checkParentPathsSync(e,r,t,"copy"),i.filter&&!i.filter(e,t))return;const n=At.dirname(t);return V.existsSync(n)||Oo(n),Ei(s,e,t,i)}function Ei(e,t,i,r){const n=(r.dereference?V.statSync:V.lstatSync)(t);if(n.isDirectory())return Io(n,e,t,i,r);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Fo(n,e,t,i,r);if(n.isSymbolicLink())return jo(e,t,i,r);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Fo(e,t,i,r,s){return t?Mo(e,i,r,s):Pi(e,i,r,s)}function Mo(e,t,i,r){if(r.overwrite)return V.unlinkSync(i),Pi(e,t,i,r);if(r.errorOnExist)throw new Error(`'${i}' already exists`)}function Pi(e,t,i,r){return V.copyFileSync(t,i),r.preserveTimestamps&&ko(e.mode,t,i),ge(i,e.mode)}function ko(e,t,i){return Do(e)&&_o(i,e),Ao(t,i)}function Do(e){return(e&128)===0}function _o(e,t){return ge(e,t|128)}function ge(e,t){return V.chmodSync(e,t)}function Ao(e,t){const i=V.statSync(e);return To(t,i.atime,i.mtime)}function Io(e,t,i,r,s){return t?xi(i,r,s):No(e.mode,i,r,s)}function No(e,t,i,r){return V.mkdirSync(i),xi(t,i,r),ge(i,e)}function xi(e,t,i){V.readdirSync(e).forEach(r=>Ro(r,e,t,i))}function Ro(e,t,i,r){const s=At.join(t,e),n=At.join(i,e);if(r.filter&&!r.filter(s,n))return;const{destStat:o}=It.checkPathsSync(s,n,"copy",r);return Ei(o,s,n,r)}function jo(e,t,i,r){let s=V.readlinkSync(t);if(r.dereference&&(s=At.resolve(process.cwd(),s)),e){let n;try{n=V.readlinkSync(i)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return V.symlinkSync(s,i);throw o}if(r.dereference&&(n=At.resolve(process.cwd(),n)),It.isSrcSubdir(s,n))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${n}'.`);if(It.isSrcSubdir(n,s))throw new Error(`Cannot overwrite '${n}' with '${s}'.`);return Lo(s,i)}else return V.symlinkSync(s,i)}function Lo(e,t){return V.unlinkSync(t),V.symlinkSync(e,t)}var Jo=Co;const Yo=I.fromPromise;var ve={copy:Yo(xo),copySync:Jo};const Oi=gt,Wo=I.fromCallback;function Bo(e,t){Oi.rm(e,{recursive:!0,force:!0},t)}function Vo(e){Oi.rmSync(e,{recursive:!0,force:!0})}var Gt={remove:Wo(Bo),removeSync:Vo};const Ho=I.fromPromise,Ti=B,Ci=A,Fi=Q,Mi=Gt,ki=Ho(async function(t){let i;try{i=await Ti.readdir(t)}catch{return Fi.mkdirs(t)}return Promise.all(i.map(r=>Mi.remove(Ci.join(t,r))))});function Di(e){let t;try{t=Ti.readdirSync(e)}catch{return Fi.mkdirsSync(e)}t.forEach(i=>{i=Ci.join(e,i),Mi.removeSync(i)})}var Uo={emptyDirSync:Di,emptydirSync:Di,emptyDir:ki,emptydir:ki};const Ko=I.fromPromise,_i=A,st=B,Ai=Q;async function Go(e){let t;try{t=await st.stat(e)}catch{}if(t&&t.isFile())return;const i=_i.dirname(e);let r=null;try{r=await st.stat(i)}catch(s){if(s.code==="ENOENT"){await Ai.mkdirs(i),await st.writeFile(e,"");return}else throw s}r.isDirectory()?await st.writeFile(e,""):await st.readdir(i)}function qo(e){let t;try{t=st.statSync(e)}catch{}if(t&&t.isFile())return;const i=_i.dirname(e);try{st.statSync(i).isDirectory()||st.readdirSync(i)}catch(r){if(r&&r.code==="ENOENT")Ai.mkdirsSync(i);else throw r}st.writeFileSync(e,"")}var zo={createFile:Ko(Go),createFileSync:qo};const Zo=I.fromPromise,Ii=A,ut=B,Ni=Q,{pathExists:Qo}=mt,{areIdentical:Ri}=$t;async function Xo(e,t){let i;try{i=await ut.lstat(t)}catch{}let r;try{r=await ut.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(i&&Ri(r,i))return;const s=Ii.dirname(t);await Qo(s)||await Ni.mkdirs(s),await ut.link(e,t)}function ta(e,t){let i;try{i=ut.lstatSync(t)}catch{}try{const n=ut.lstatSync(e);if(i&&Ri(n,i))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}const r=Ii.dirname(t);return ut.existsSync(r)||Ni.mkdirsSync(r),ut.linkSync(e,t)}var ea={createLink:Zo(Xo),createLinkSync:ta};const ht=A,Nt=B,{pathExists:ia}=mt,ra=I.fromPromise;async function sa(e,t){if(ht.isAbsolute(e)){try{await Nt.lstat(e)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:e,toDst:e}}const i=ht.dirname(t),r=ht.join(i,e);if(await ia(r))return{toCwd:r,toDst:e};try{await Nt.lstat(e)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:e,toDst:ht.relative(i,e)}}function na(e,t){if(ht.isAbsolute(e)){if(!Nt.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const i=ht.dirname(t),r=ht.join(i,e);if(Nt.existsSync(r))return{toCwd:r,toDst:e};if(!Nt.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:ht.relative(i,e)}}var oa={symlinkPaths:ra(sa),symlinkPathsSync:na};const ji=B,aa=I.fromPromise;async function la(e,t){if(t)return t;let i;try{i=await ji.lstat(e)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}function ca(e,t){if(t)return t;let i;try{i=ji.lstatSync(e)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}var ua={symlinkType:aa(la),symlinkTypeSync:ca};const ha=I.fromPromise,Li=A,X=B,{mkdirs:da,mkdirsSync:fa}=Q,{symlinkPaths:ma,symlinkPathsSync:pa}=oa,{symlinkType:ya,symlinkTypeSync:wa}=ua,{pathExists:ga}=mt,{areIdentical:Ji}=$t;async function va(e,t,i){let r;try{r=await X.lstat(t)}catch{}if(r&&r.isSymbolicLink()){const[l,p]=await Promise.all([X.stat(e),X.stat(t)]);if(Ji(l,p))return}const s=await ma(e,t);e=s.toDst;const n=await ya(s.toCwd,i),o=Li.dirname(t);return await ga(o)||await da(o),X.symlink(e,t,n)}function ba(e,t,i){let r;try{r=X.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const l=X.statSync(e),p=X.statSync(t);if(Ji(l,p))return}const s=pa(e,t);e=s.toDst,i=wa(s.toCwd,i);const n=Li.dirname(t);return X.existsSync(n)||fa(n),X.symlinkSync(e,t,i)}var Sa={createSymlink:ha(va),createSymlinkSync:ba};const{createFile:Yi,createFileSync:Wi}=zo,{createLink:Bi,createLinkSync:Vi}=ea,{createSymlink:Hi,createSymlinkSync:Ui}=Sa;var $a={createFile:Yi,createFileSync:Wi,ensureFile:Yi,ensureFileSync:Wi,createLink:Bi,createLinkSync:Vi,ensureLink:Bi,ensureLinkSync:Vi,createSymlink:Hi,createSymlinkSync:Ui,ensureSymlink:Hi,ensureSymlinkSync:Ui};function Ea(e,{EOL:t=`
`,finalEOL:i=!0,replacer:r=null,spaces:s}={}){const n=i?t:"";return JSON.stringify(e,r,s).replace(/\n/g,t)+n}function Pa(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var be={stringify:Ea,stripBom:Pa};let Et;try{Et=gt}catch{Et=Fe}const qt=I,{stringify:Ki,stripBom:Gi}=be;async function xa(e,t={}){typeof t=="string"&&(t={encoding:t});const i=t.fs||Et,r="throws"in t?t.throws:!0;let s=await qt.fromCallback(i.readFile)(e,t);s=Gi(s);let n;try{n=JSON.parse(s,t?t.reviver:null)}catch(o){if(r)throw o.message=`${e}: ${o.message}`,o;return null}return n}const Oa=qt.fromPromise(xa);function Ta(e,t={}){typeof t=="string"&&(t={encoding:t});const i=t.fs||Et,r="throws"in t?t.throws:!0;try{let s=i.readFileSync(e,t);return s=Gi(s),JSON.parse(s,t.reviver)}catch(s){if(r)throw s.message=`${e}: ${s.message}`,s;return null}}async function Ca(e,t,i={}){const r=i.fs||Et,s=Ki(t,i);await qt.fromCallback(r.writeFile)(e,s,i)}const Fa=qt.fromPromise(Ca);function Ma(e,t,i={}){const r=i.fs||Et,s=Ki(t,i);return r.writeFileSync(e,s,i)}const ka={readFile:Oa,readFileSync:Ta,writeFile:Fa,writeFileSync:Ma};var Da=ka;const zt=Da;var _a={readJson:zt.readFile,readJsonSync:zt.readFileSync,writeJson:zt.writeFile,writeJsonSync:zt.writeFileSync};const Aa=I.fromPromise,Se=B,qi=A,zi=Q,Ia=mt.pathExists;async function Na(e,t,i="utf-8"){const r=qi.dirname(e);return await Ia(r)||await zi.mkdirs(r),Se.writeFile(e,t,i)}function Ra(e,...t){const i=qi.dirname(e);Se.existsSync(i)||zi.mkdirsSync(i),Se.writeFileSync(e,...t)}var $e={outputFile:Aa(Na),outputFileSync:Ra};const{stringify:ja}=be,{outputFile:La}=$e;async function Ja(e,t,i={}){const r=ja(t,i);await La(e,r,i)}var Ya=Ja;const{stringify:Wa}=be,{outputFileSync:Ba}=$e;function Va(e,t,i){const r=Wa(t,i);Ba(e,r,i)}var Ha=Va;const Ua=I.fromPromise,H=_a;H.outputJson=Ua(Ya),H.outputJsonSync=Ha,H.outputJSON=H.outputJson,H.outputJSONSync=H.outputJsonSync,H.writeJSON=H.writeJson,H.writeJSONSync=H.writeJsonSync,H.readJSON=H.readJson,H.readJSONSync=H.readJsonSync;var Ka=H;const Ga=B,Zi=A,{copy:qa}=ve,{remove:Qi}=Gt,{mkdirp:za}=Q,{pathExists:Za}=mt,Xi=$t;async function Qa(e,t,i={}){const r=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:n=!1}=await Xi.checkPaths(e,t,"move",i);await Xi.checkParentPaths(e,s,t,"move");const o=Zi.dirname(t);return Zi.parse(o).root!==o&&await za(o),Xa(e,t,r,n)}async function Xa(e,t,i,r){if(!r){if(i)await Qi(t);else if(await Za(t))throw new Error("dest already exists.")}try{await Ga.rename(e,t)}catch(s){if(s.code!=="EXDEV")throw s;await tl(e,t,i)}}async function tl(e,t,i){return await qa(e,t,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),Qi(e)}var el=Qa;const tr=gt,Ee=A,il=ve.copySync,er=Gt.removeSync,rl=Q.mkdirpSync,ir=$t;function sl(e,t,i){i=i||{};const r=i.overwrite||i.clobber||!1,{srcStat:s,isChangingCase:n=!1}=ir.checkPathsSync(e,t,"move",i);return ir.checkParentPathsSync(e,s,t,"move"),nl(t)||rl(Ee.dirname(t)),ol(e,t,r,n)}function nl(e){const t=Ee.dirname(e);return Ee.parse(t).root===t}function ol(e,t,i,r){if(r)return Pe(e,t,i);if(i)return er(t),Pe(e,t,i);if(tr.existsSync(t))throw new Error("dest already exists.");return Pe(e,t,i)}function Pe(e,t,i){try{tr.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return al(e,t,i)}}function al(e,t,i){return il(e,t,{overwrite:i,errorOnExist:!0,preserveTimestamps:!0}),er(e)}var ll=sl;const cl=I.fromPromise;var ul={move:cl(el),moveSync:ll},hl={...B,...ve,...Uo,...$a,...Ka,...Q,...ul,...$e,...mt,...Gt};const nt=Xt(hl);let pt=!0;const Pt=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Rt=0;if(Pt.process&&Pt.process.env&&Pt.process.stdout){const{FORCE_COLOR:e,NODE_DISABLE_COLORS:t,NO_COLOR:i,TERM:r,COLORTERM:s}=Pt.process.env;t||i||e==="0"?pt=!1:e==="1"||e==="2"||e==="3"?pt=!0:r==="dumb"?pt=!1:"CI"in Pt.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in Pt.process.env)?pt=!0:pt=process.stdout.isTTY,pt&&(process.platform==="win32"||s&&(s==="truecolor"||s==="24bit")?Rt=3:r&&(r.endsWith("-256color")||r.endsWith("256"))?Rt=2:Rt=1)}let rr={enabled:pt,supportLevel:Rt};function xe(e,t,i=1){const r=`\x1B[${e}m`,s=`\x1B[${t}m`,n=new RegExp(`\\x1b\\[${t}m`,"g");return o=>rr.enabled&&rr.supportLevel>=i?r+(""+o).replace(n,r)+s:""+o}const xt=xe(31,39),dl=xe(32,39),Oe=xe(36,39),sr="18.0.0",nr="7.0.0",fl=gr(br),Te=Wn(process.argv.slice(2),{string:["_"]}),or="vueform-project",ar=bl(process.env.npm_config_user_agent),Ot=ar?ar.name:"npm",ml=A.dirname(Er(import.meta.url)),pl=!!Te.start,lr=!!Te.force,cr=[{title:"Vite",value:"vite",command:{npm:"npm create vite@latest %PROJECT_NAME% -- --template %TEMPLATE%",yarn:"yarn create vite %PROJECT_NAME% --template %TEMPLATE%",pnpm:"pnpm create vite %PROJECT_NAME% --template %TEMPLATE%",bun:"bun create vite %PROJECT_NAME% --template %TEMPLATE%"}},{title:"Nuxt",value:"nuxt",command:{npm:"npx nuxi@latest init %PROJECT_NAME% --packageManager=%PACKAGE_MANAGER%",yarn:"npx nuxi@latest init %PROJECT_NAME% --packageManager=%PACKAGE_MANAGER%",pnpm:"pnpm dlx nuxi@latest init %PROJECT_NAME% --packageManager=%PACKAGE_MANAGER%",bun:"bunx nuxi@latest init %PROJECT_NAME% --packageManager=%PACKAGE_MANAGER%"}},{title:"Astro",value:"astro",command:{npm:"npm create astro@latest %PROJECT_NAME% -- --install=yes",yarn:"yarn create astro %PROJECT_NAME% --install=yes",pnpm:"pnpm create astro %PROJECT_NAME% --install=yes",bun:"bun create astro %PROJECT_NAME% --install=yes"}},{title:"Laravel",value:"laravel",command:"%COMPOSER_PATH% create-project laravel/laravel %PROJECT_NAME%"}],yl=[{title:"Vueform",value:"vueform"},{title:"Tailwind",value:"tailwind"},{title:"Bootstrap",value:"bootstrap"},{title:"Material",value:"material"},{title:"Tailwind Material",value:"tailwind-material"}],wl={vite:{install:["npm install -D tailwindcss postcss autoprefixer"]},nuxt:{install:["npm install -D @nuxtjs/tailwindcss"]},astro:{install:["npm install @astrojs/tailwind tailwindcss"]},laravel:{install:["npm install -D tailwindcss postcss autoprefixer"]}};process.env.PATH+=":/usr/local/bin",Ol();async function gl(){try{const{projectName:e}=await si({type:"text",name:"projectName",initial:or,message:"What is your project name?",validate:async y=>/^[a-zA-Z0-9]+[a-zA-Z0-9-_]*$/.test(y)?!lr&&await ur(y)?`The directory '${y}' already exists.`:y?!0:"Please provide a project name":"Invalid project name. Use only alphanumeric, underscore, and hyphen characters and do not start with a hyphen or underscore."},{onCancel:()=>{throw new Error(xt("\u2716")+" Operation cancelled")}});lr&&await ur(A.join(process.cwd(),e))&&await q("rm",["-r",or]);const t=await si([{type:"select",name:"builder",message:"Which libraries do you want to install?",choices:[{title:"Vueform",value:"vueform"},{title:"Vueform + Builder",value:"builder"}]},{type:y=>y==="builder"?"text":null,name:"publicKey",initial:Te.publicKey||"obtain a FREE one at https://app.vueform.com",message:"Your Public Key: ",validate:async y=>/^[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}$/.test(y)?y?!0:"Please provide your Public Key. If you don't have one go to https://app.vueform.com and generate one for FREE.":"Invalid Public Key. Please go to https://app.vueform.com and generate one for FREE."},{type:"select",name:"framework",message:"Choose a framework:",choices:cr},{type:y=>y!=="vite"||y==="laravel"?null:"toggle",name:"ts",message:"Do you plan to use TypeScript?",initial:"yes",active:"yes",inactive:"no"},{type:(y,{builder:w})=>w==="builder"?null:"select",name:"theme",message:"Select a theme for your project:",choices:yl}],{onCancel:()=>{throw new Error(xt("\u2716")+" Operation cancelled")}}),{framework:i,ts:r,builder:s,publicKey:n}=t,o=s==="builder"?"tailwind":t.theme;if(e&&i){const y=vl(i);Zt(`Creating project '${e}' using ${y.title}...`);const w=i==="vite"?`vue${r?"-ts":""}`:"";let k="";i==="laravel"&&(k=await xl());let S=typeof y.command=="string"?y.command:y.command[Ot];S=S.replace("%PROJECT_NAME%",e).replace("%TEMPLATE%",w).replace("%PACKAGE_MANAGER%",Ot).replace("%COMPOSER_PATH%",k).split(" "),await q(S[0],S.slice(1),`create project with ${y.title}`)}else{console.error("Project creation canceled.");return}if(!o){console.error("Project creation canceled.");return}process.chdir(e),Zt(`
Installing dependencies...`),await q("npm",["install"],"install dependencies");const l=i==="astro",p=await Sl(process.cwd(),i,r),d=s==="builder",a=["tailwind","tailwind-material"].indexOf(o)!==-1||d,h=["bootstrap"].indexOf(o)!==-1,c=i==="laravel",u=A.join(ml,"../","templates",s,i,o,p?"ts":"js"),f=process.cwd();a&&(Zt(`
Installing Tailwind...`),await Promise.all(wl[i].install.map(async y=>{const w=y.split(" ");await q(w[0],w.slice(1),"install Tailwind CSS")}))),h&&(console.log(`
Installing Bootstrap...`),await q("npm",["install","bootstrap"],"install Bootstrap")),l&&(console.log(`
Installing Vue...`),await q("npm",["install","vue","@astrojs/vue"],"install Vue in Astro"),await $l(process.cwd())),c&&(console.log(`
Installing Vue...`),await q("npm",["install","@vitejs/plugin-vue"],"install Vue in Laravel"));const b=d?i==="nuxt"?"@vueform/builder-nuxt":"@vueform/vueform @vueform/builder":i==="nuxt"?"@vueform/nuxt":"@vueform/vueform";Zt(`
Installing Vueform${d?" Builder":""}...`),await q("npm",["install",...b.split(" ")],`install ${b}`),await Pl(u,f),d&&await El(process.cwd(),n),console.log(dl(`
\u2714 Installation finished`)),console.log(Oe(`
cd ${e}`)),console.log(Oe(`${Ot} run dev
`)),pl&&(c?(await q("npm",["run","build"]),await q("php",["artisan","serve"])):await q("npm",["run","dev"]))}catch(e){console.log(xt(e.message));return}}function vl(e){return cr.find(t=>t.value===e)}function bl(e){if(!e)return;const t=e.split(" ")[0].split("/");return{name:t[0],version:t[1]}}function q(e,t,i=""){return e==="npm"&&(e=["npm","yarn","pnpm","bun"].indexOf(Ot)!==-1?Ot:"npm",t[0]==="install"&&t.length>1&&["yarn","pnpm"].indexOf(Ot)!==-1&&(t=[...t],t[0]="add")),new Promise((r,s)=>{const n=$r(e,t,{stdio:"inherit"});n.on("close",o=>{o!==0?s(new Error(`${e} exited with code ${o}`)):r()}),n.on("error",o=>{s(new Error(`Failed to ${i||"start process"}: ${o.message}`))})})}function Zt(e){return console.log(Oe(e))}async function ur(e){try{return(await mr.stat(e)).isDirectory()}catch(t){if(t.code==="ENOENT")return!1;throw t}}async function Sl(e,t,i){switch(t){case"nuxt":return!0;case"astro":const r=A.join(e,"tsconfig.json");try{return(await nt.readJson(r)).extends!=="astro/tsconfigs/base"}catch(s){throw new Error(`Error reading tsconfig.json: ${s.message}`)}break;case"laravel":return!1;default:return i}}async function $l(e){const t=A.join(e,"tsconfig.json");try{const i=await nt.readJson(t);i.compilerOptions={jsx:"preserve"},await nt.writeJson(t,i,{spaces:2})}catch(i){throw new Error(`Error updating tsconfig.json: ${i.message}`)}}async function El(e,t){const i=A.join(e,"vueform.config.js"),r=A.join(e,"vueform.config.ts");let s;try{if(await nt.pathExists(i))s=i;else if(await nt.pathExists(r))s=r;else throw new Error(`No vueform.config.js or vueform.config.ts file found: ${err.message}`)}catch(n){throw new Error(`Error checking for config files: ${n.message}`)}try{let n=await nt.readFile(s,"utf8");n=n.replace(/YOUR_PUBLIC_KEY/g,t),await nt.writeFile(s,n,"utf8")}catch(n){throw new Error(`Error inserting Public Key to ${A.basename(s)}: ${n.message}`)}}async function Pl(e,t){try{await nt.copy(e,t,{overwrite:!0})}catch(i){throw new Error(`Error copying files: ${i.message}`)}}async function xl(){const e=["/usr/local/bin/composer","/usr/local/bin/composer.phar","/usr/bin/composer","/usr/bin/composer.phar","C:\\ProgramData\\ComposerSetup\\bin\\composer","C:\\ProgramData\\ComposerSetup\\bin\\composer.phar","C:\\Program Files\\Composer\\composer.phar","C:\\Program Files\\Composer\\composer"];let t="composer";try{return await fl("composer --version"),t}catch{t=""}if(e.forEach(i=>{nt.existsSync(i)&&(t=i)}),t.endsWith(".phar")&&(t=`php ${t}`),!t)throw console.error(xt(`
Composer not found. Please ensure Composer is installed and added to your PATH.`)),console.error(xt(`Visit https://getcomposer.org/download/ for installation instructions.
`)),new Error(xt("\u2716")+" Operation cancelled");return t}function Ol(){const e=process.version.replace("v",""),t=Sr("npm -v").toString().trim();hr(e,sr)<0&&(console.error(`Error: Minimum Node.js version required is ${sr}. Your current version is ${e}. Please upgrade Node.js.`),process.exit(1)),hr(t,nr)<0&&(console.error(`Error: Minimum npm version required is ${nr}. Your current version is ${t}. Please upgrade npm.`),process.exit(1))}function hr(e,t){const i=e.split(".").map(Number),r=t.split(".").map(Number);for(let s=0;s<3;s++)if(i[s]!==r[s])return i[s]-r[s];return 0}gl();
